<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: b94d63fc0884d83ba43433ab33cc4810d955bf6d Maintainer: lacatoire Status: ready -->
<!-- Reviewed: no -->
<sect1 xml:id="migration80.incompatible" xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>Cambios incompatibles hacia atrás</title>

 <sect2 xml:id="migration80.incompatible.core">
  <title>PHP Core</title>

  <sect3 xml:id="migration80.incompatible.core.string-number-comparision">
   <title>Comparación de cadenas con números</title>

   <para>
    Las comparaciones no estrictas entre números y cadenas no numéricas ahora funcionan convirtiendo el
    número a cadena y comparando las cadenas. Las comparaciones entre números y cadenas numéricas
    continúan funcionando como antes. En particular, esto significa que
    <code>0 == "not-a-number"</code> ahora se considera falso.
    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>Comparación</entry>
        <entry>Antes</entry>
        <entry>Después</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry><code>0 == "0"</code></entry>
        <entry>&true;</entry>
        <entry>&true;</entry>
       </row>
       <row>
        <entry><code>0 == "0.0"</code></entry>
        <entry>&true;</entry>
        <entry>&true;</entry>
       </row>
       <row>
        <entry><code>0 == "foo"</code></entry>
        <entry>&true;</entry>
        <entry>&false;</entry>
       </row>
       <row>
        <entry><code>0 == ""</code></entry>
        <entry>&true;</entry>
        <entry>&false;</entry>
       </row>
       <row>
        <entry><code>42 == "   42"</code></entry>
        <entry>&true;</entry>
        <entry>&true;</entry>
       </row>
       <row>
        <entry><code>42 == "42foo"</code></entry>
        <entry>&true;</entry>
        <entry>&false;</entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
    <!-- RFC: https://wiki.php.net/rfc/string_to_number_comparison -->
   </para>
  </sect3>

  <sect3 xml:id="migration80.incompatible.core.other">
   <title>Otros cambios incompatibles</title>

   <itemizedlist>
    <listitem>
     <para>
      <literal>match</literal> es ahora una palabra reservada.
     </para>
    </listitem>
    <listitem>
     <para>
      Los fallos de aserción ahora lanzan una excepción por defecto. Si se desea el comportamiento
      anterior, se puede establecer <code>assert.exception=0</code> en la configuración INI.
     </para>
    </listitem>
    <listitem>
     <para>
      Los métodos con el mismo nombre que la clase ya no se interpretan como constructores. Se debe
      usar el método <link linkend="object.construct">__construct()</link> en su lugar.
     </para>
    </listitem>
    <listitem>
     <para>
      La posibilidad de llamar a métodos no estáticos de forma estática ha sido eliminada. Por lo
      tanto, <function>is_callable</function> fallará al verificar un método no estático con un nombre
      de clase (se debe verificar con una instancia de objeto).
     </para>
    </listitem>
    <listitem>
     <para>
      Las conversiones <code>(real)</code> y <code>(unset)</code> han sido eliminadas.
     </para>
    </listitem>
    <listitem>
      <para>
       La directiva ini <link linkend="ini.track-errors">track_errors</link> ha sido eliminada. Esto
       significa que <varname>php_errormsg</varname> ya no está disponible. Se puede usar la función
       <function>error_get_last</function> en su lugar.
      </para>
    </listitem>
    <listitem>
     <para>
      La posibilidad de definir constantes insensibles a mayúsculas y minúsculas ha sido eliminada. El
      tercer argumento de <function>define</function> ya no puede ser &true;.
     </para>
    </listitem>
    <listitem>
     <para>
      La posibilidad de especificar un autocargador utilizando una función
      <function>__autoload</function> ha sido eliminada. Se debe usar
      <function>spl_autoload_register</function> en su lugar.
     </para>
    </listitem>
    <listitem>
     <para>
      El argumento <parameter>errcontext</parameter> ya no se pasará a los manejadores de errores
      personalizados establecidos con <function>set_error_handler</function>.
     </para>
    </listitem>
    <listitem>
     <para>
      <function>create_function</function> ha sido eliminada. Se pueden usar funciones anónimas en su
      lugar.
     </para>
    </listitem>
    <listitem>
     <para>
      <function>each</function> ha sido eliminada. Se debe usar &foreach; o
      <classname>ArrayIterator</classname> en su lugar.
     </para>
    </listitem>
    <listitem>
     <para>
      La posibilidad de desvincular <varname>this</varname> de closures que fueron creadas a partir de
      un método, utilizando <methodname>Closure::fromCallable</methodname> o
      <methodname>ReflectionMethod::getClosure</methodname>, ha sido eliminada.
     </para>
    </listitem>
    <listitem>
     <para>
      La posibilidad de desvincular <varname>this</varname> de closures propias que contienen usos de
      <varname>this</varname> también ha sido eliminada.
     </para>
    </listitem>
    <listitem>
     <para>
      La posibilidad de usar <function>array_key_exists</function> con objetos ha sido eliminada. Se
      puede usar <function>isset</function> o <function>property_exists</function> en su lugar.
     </para>
    </listitem>
    <listitem>
     <para>
      El comportamiento de <function>array_key_exists</function> en relación con el tipo del parámetro
      <parameter>key</parameter> se ha hecho consistente con <function>isset</function> y el acceso
      normal a arrays. Todos los tipos de clave ahora usan las coerciones habituales y las claves de
      tipo array/object lanzan un <classname>TypeError</classname>.
     </para>
    </listitem>
    <listitem>
     <para>
      Cualquier array que tenga un número <replaceable>n</replaceable> como su primera clave numérica
      usará <replaceable>n+1</replaceable> para su siguiente clave implícita, incluso si
      <replaceable>n</replaceable> es negativo.
      <!-- RFC: https://wiki.php.net/rfc/negative_array_index -->
     </para>
    </listitem>
    <listitem>
     <para>
      El nivel predeterminado de error_reporting es ahora <constant>E_ALL</constant>. Anteriormente
      excluía <constant>E_NOTICE</constant> y <constant>E_DEPRECATED</constant>.
     </para>
    </listitem>
    <listitem>
     <para>
      <link linkend="ini.display-startup-errors">display_startup_errors</link> está ahora habilitado
      por defecto.
     </para>
    </listitem>
    <listitem>
     <para>
      Usar <type>parent</type> dentro de una clase que no tiene padre ahora resultará en un error fatal
      en tiempo de compilación.
     </para>
    </listitem>
    <listitem>
     <para>
      El operador <literal>@</literal> ya no silenciará los errores fatales
      (<constant>E_ERROR</constant>, <constant>E_CORE_ERROR</constant>,
      <constant>E_COMPILE_ERROR</constant>, <constant>E_USER_ERROR</constant>,
      <constant>E_RECOVERABLE_ERROR</constant>, <constant>E_PARSE</constant>). Los manejadores de
      errores que esperan que error_reporting sea <literal>0</literal> cuando se usa
      <literal>@</literal>, deben ajustarse para usar una verificación de máscara en su lugar:
     </para>
     <para>
      <programlisting role="php">
<![CDATA[
<?php
// Reemplazar
function my_error_handler($err_no, $err_msg, $filename, $linenum) {
    if (error_reporting() == 0) {
        return; // Silenciado
    }
    // ...
}

// Por
function my_error_handler($err_no, $err_msg, $filename, $linenum) {
    if (!(error_reporting() & $err_no)) {
        return; // Silenciado
    }
    // ...
}
?>
]]>
      </programlisting>
     </para>
     <para>
      Además, se debe tener cuidado de que los mensajes de error no se muestren en entornos de
      producción, lo que puede resultar en fugas de información. Es necesario asegurarse de que
      <code>display_errors=Off</code> se use junto con el registro de errores.
     </para>
    </listitem>
    <listitem>
     <para>
      <literal>#[</literal> ya no se interpreta como el inicio de un comentario, ya que esta sintaxis
      ahora se usa para atributos.
      <!-- RFC: https://wiki.php.net/rfc/shorter_attribute_syntax_change -->
     </para>
    </listitem>
    <listitem>
     <para>
      Los errores de herencia debidos a firmas de métodos incompatibles (violaciones de LSP) ahora
      siempre generarán un error fatal. Anteriormente se generaba una advertencia en algunos casos.
      <!-- RFC: https://wiki.php.net/rfc/lsp_errors -->
     </para>
    </listitem>
    <listitem>
     <para>
      La precedencia del operador de concatenación ha cambiado en relación con los desplazamientos de
      bits y la suma, así como la resta.
     </para>
     <para>
      <programlisting role="php">
<![CDATA[
<?php
echo "Sum: " . $a + $b;
// anteriormente se interpretaba como:
echo ("Sum: " . $a) + $b;
// ahora se interpreta como:
echo "Sum:" . ($a + $b);
?>
]]>
      </programlisting>
      <!-- RFC: https://wiki.php.net/rfc/concatenation_precedence -->
     </para>
    </listitem>
    <listitem>
     <para>
      Los argumentos con un valor predeterminado que se resuelve a &null; en tiempo de ejecución ya no
      marcarán implícitamente el tipo del argumento como nullable. Se debe usar un tipo nullable
      explícito o un valor predeterminado &null; explícito en su lugar.
     </para>
     <para>
      <programlisting role="php">
<![CDATA[
<?php
// Reemplazar
function test(int $arg = CONST_RESOLVING_TO_NULL) {}
// Por
function test(?int $arg = CONST_RESOLVING_TO_NULL) {}
// O
function test(int $arg = null) {}
?>
]]>
      </programlisting>
     </para>
    </listitem>
    <listitem>
     <para>
      Varias advertencias se han convertido en excepciones <classname>Error</classname>:
     </para>
     <para>
      <simplelist>
       <member>
        Intentar escribir en una propiedad de un no-objeto. Anteriormente esto creaba implícitamente
        un objeto stdClass para null, false y cadenas vacías.
       </member>
       <member>
        Intentar agregar un elemento a un array cuya clave PHP_INT_MAX ya está en uso.
       </member>
       <member>
        Intentar usar un tipo no válido (array u objeto) como clave de array u offset de cadena.
       </member>
       <member>Intentar escribir en un índice de array de un valor escalar.</member>
       <member>Intentar desempaquetar un valor que no es array/Traversable.</member>
       <member>
        Intentar acceder a constantes no calificadas que no están definidas. Anteriormente, el acceso
        a constantes no calificadas resultaba en una advertencia y se interpretaban como cadenas.
       </member>
      </simplelist>
     </para>
     <para>
      Varios avisos se han convertido en advertencias:
     </para>
     <para>
      <simplelist>
       <member>Intentar leer una variable no definida.</member>
       <member>Intentar leer una propiedad no definida.</member>
       <member>Intentar leer una clave de array no definida.</member>
       <member>Intentar leer una propiedad de un no-objeto.</member>
       <member>Intentar acceder a un índice de array de un no-array.</member>
       <member>Intentar convertir un array a cadena.</member>
       <member>Intentar usar un recurso como clave de array.</member>
       <member>Intentar usar null, un booleano o un flotante como offset de cadena.</member>
       <member>Intentar leer un offset de cadena fuera de los límites.</member>
       <member>Intentar asignar una cadena vacía a un offset de cadena.</member>
      </simplelist>
      <!-- RFC: https://wiki.php.net/rfc/engine_warnings -->
     </para>
    </listitem>
    <listitem>
     <para>
      Intentar asignar múltiples bytes a un offset de cadena ahora emitirá una advertencia.
     </para>
    </listitem>
    <listitem>
     <para>
      Los caracteres inesperados en los archivos fuente (como bytes NUL fuera de las cadenas) ahora
      resultarán en una excepción <classname>ParseError</classname> en lugar de una advertencia de
      compilación.
     </para>
    </listitem>
    <listitem>
     <para>
      Las excepciones no capturadas ahora pasan por un "cierre limpio", lo que significa que los
      destructores se llamarán después de una excepción no capturada.
     </para>
    </listitem>
    <listitem>
     <para>
      El error fatal en tiempo de compilación "Only variables can be passed by reference" se ha
      pospuesto hasta el tiempo de ejecución y se ha convertido en una excepción
      <classname>Error</classname> "Argument cannot be passed by reference".
     </para>
    </listitem>
    <listitem>
     <para>
      Algunos avisos "Only variables should be passed by reference" se han convertido en la excepción
      "Argument cannot be passed by reference".
     </para>
    </listitem>
    <listitem>
     <para>
      El nombre generado para las clases anónimas ha cambiado. Ahora incluirá el nombre de la primera
      clase padre o interfaz:
     </para>
     <para>
      <programlisting role="php">
<![CDATA[
<?php
new class extends ParentClass {};
// -> ParentClass@anonymous
new class implements FirstInterface, SecondInterface {};
// -> FirstInterface@anonymous
new class {};
// -> class@anonymous
?>
]]>
      </programlisting>
     </para>
     <para>
      El nombre mostrado arriba todavía va seguido de un byte NUL y un sufijo único.
     </para>
    </listitem>
    <listitem>
     <para>
      Las referencias a métodos de trait no absolutas en las adaptaciones de alias de trait ahora deben
      ser inequívocas:
     </para>
     <para>
      <programlisting role="php">
<![CDATA[
<?php
class X {
    use T1, T2 {
        func as otherFunc;
    }
    function func() {}
}
?>
]]>
      </programlisting>
     </para>
     <para>
      Si tanto <code>T1::func()</code> como <code>T2::func()</code> existen, este código era aceptado
      silenciosamente antes, y se asumía que func se refería a <code>T1::func</code>. Ahora generará un
      error fatal en su lugar, y se debe escribir explícitamente <code>T1::func</code> o
      <code>T2::func</code>.
     </para>
    </listitem>
    <listitem>
     <para>
      La firma de los métodos abstractos definidos en traits ahora se verifica contra el método de la
      clase que los implementa:
     </para>
     <para>
      <programlisting role="php">
<![CDATA[
<?php
trait MyTrait {
    abstract private function neededByTrait(): string;
}

class MyClass {
    use MyTrait;

    // Error, debido a la incompatibilidad del tipo de retorno.
    private function neededByTrait(): int { return 42; }
}
?>
]]>
      </programlisting>
      <!-- RFC: https://wiki.php.net/rfc/abstract_trait_method_validation -->
     </para>
    </listitem>
    <listitem>
     <para>
      Las funciones deshabilitadas ahora se tratan exactamente como funciones inexistentes. Llamar a
      una función deshabilitada la reportará como desconocida, y redefinir una función deshabilitada
      ahora es posible.
     </para>
    </listitem>
    <listitem>
     <para>
      Los envoltorios de flujo <literal>data://</literal> ya no son escribibles, lo que coincide con el
      comportamiento documentado.
     </para>
    </listitem>
    <listitem>
     <para>
      Los operadores aritméticos y a nivel de bits <literal>+</literal>, <literal>-</literal>,
      <literal>*</literal>, <literal>/</literal>, <literal>**</literal>, <literal>%</literal>,
      <literal>&lt;&lt;</literal>, <literal>&gt;&gt;</literal>, <literal>&amp;</literal>,
      <literal>|</literal>, <literal>^</literal>, <literal>~</literal>, <literal>++</literal>,
      <literal>--</literal> ahora lanzarán consistentemente un <classname>TypeError</classname> cuando
      uno de los operandos sea un &array;, &resource; u &object; no sobrecargado. La única excepción a
      esto es la operación de fusión de arrays <literal>+</literal>, que sigue siendo soportada.
      <!-- RFC: https://wiki.php.net/rfc/arithmetic_operator_type_checks -->
     </para>
    </listitem>
    <listitem>
     <para>
      La conversión de flotante a cadena ahora siempre se comportará de manera independiente de la
      configuración regional.
     </para>
     <para>
      <programlisting role="php">
<![CDATA[
<?php
setlocale(LC_ALL, "de_DE");
$f = 3.14;
echo $f, "\n";
// Anteriormente: 3,14
// Ahora:         3.14
?>
]]>
      </programlisting>
     </para>
     <para>
      Véase <function>printf</function>, <function>number_format</function> y
      <methodname>NumberFormatter</methodname> para formas de personalizar el formato de números.
      <!-- RFC: https://wiki.php.net/rfc/locale_independent_float_to_string -->
     </para>
    </listitem>
    <listitem>
     <para>
      El soporte para el acceso a offsets con llaves (obsoleto) ha sido eliminado.
     </para>
     <para>
      <programlisting role="php">
<![CDATA[
<?php
// En lugar de:
$array{0};
$array{"key"};
// Escribir:
$array[0];
$array["key"];
?>
]]>
      </programlisting>
      <!-- RFC: https://wiki.php.net/rfc/deprecate_curly_braces_array_access -->
     </para>
    </listitem>
    <listitem>
     <para>
      Aplicar el modificador final en un método privado ahora producirá una advertencia a menos que ese
      método sea el constructor.
      <!-- FC: https://wiki.php.net/rfc/inheritance_private_methods -->
     </para>
    </listitem>
    <listitem>
     <para>
      Si el constructor de un objeto llama a <function>exit</function>, el destructor del objeto ya no
      se llamará. Esto coincide con el comportamiento cuando el constructor lanza una excepción.
     </para>
    </listitem>
    <listitem>
     <para>
      Los nombres con espacio de nombres ya no pueden contener espacios en blanco: Mientras que
      <code>Foo\Bar</code> se reconocerá como un nombre con espacio de nombres,
      <code>Foo \ Bar</code> no. Por el contrario, las palabras reservadas ahora están permitidas como
      segmentos de espacio de nombres, lo que también puede cambiar la interpretación del código:
      <code>new\x</code> ahora es lo mismo que <code>constant('new\x')</code>, no
      <code>new \x()</code>.
      <!-- RFC: https://wiki.php.net/rfc/namespaced_names_as_token -->
     </para>
    </listitem>
    <listitem>
     <para>
      Los ternarios anidados ahora requieren paréntesis explícitos.
      <!-- RFC: https://wiki.php.net/rfc/ternary_associativity -->
     </para>
    </listitem>
    <listitem>
     <para>
      <function>debug_backtrace</function> y <methodname>Exception::getTrace</methodname> ya no
      proporcionarán referencias a los argumentos. No será posible cambiar los argumentos de una
      función a través del backtrace.
     </para>
    </listitem>
    <listitem>
     <para>
      El manejo de cadenas numéricas ha sido modificado para ser más intuitivo y menos propenso a
      errores. Los espacios en blanco finales ahora se permiten en cadenas numéricas por consistencia
      con la forma en que se tratan los espacios en blanco iniciales. Esto afecta principalmente a:
     </para>
     <para>
      <simplelist>
       <member>La función <function>is_numeric</function></member>
       <member>Comparaciones de cadena a cadena</member>
       <member>Declaraciones de tipo</member>
       <member>Operaciones de incremento y decremento</member>
      </simplelist>
     </para>
     <para>
      El concepto de "cadena numéricamente inicial" ha sido mayormente eliminado; los casos donde esto
      se mantiene existen para facilitar la migración. Las cadenas que emitían un
      <constant>E_NOTICE</constant> "A non well-formed numeric value encountered" ahora emitirán un
      <constant>E_WARNING</constant> "A non-numeric value encountered" y todas las cadenas que emitían
      un <constant>E_WARNING</constant> "A non-numeric value encountered" ahora lanzarán un
      <classname>TypeError</classname>. Esto afecta principalmente a:
     </para>
     <para>
      <simplelist>
       <member>Operaciones aritméticas</member>
       <member>Operaciones a nivel de bits</member>
      </simplelist>
     </para>
     <para>
      Este cambio de <constant>E_WARNING</constant> a <classname>TypeError</classname> también afecta
      al <constant>E_WARNING</constant> "Illegal string offset 'string'" para offsets de cadena
      ilegales. El comportamiento de las conversiones explícitas a int/float desde cadenas no ha
      cambiado.
      <!-- RFC: https://wiki.php.net/rfc/saner-numeric-strings -->
     </para>
    </listitem>
    <listitem>
     <para>
      Los métodos mágicos ahora tendrán sus argumentos y tipos de retorno verificados si los tienen
      declarados. Las firmas deben coincidir con la siguiente lista:
     </para>
     <para>
      <simplelist>
       <member><code>__call(string $name, array $arguments): mixed</code></member>
       <member><code>__callStatic(string $name, array $arguments): mixed</code></member>
       <member><code>__clone(): void</code></member>
       <member><code>__debugInfo(): ?array</code></member>
       <member><code>__get(string $name): mixed</code></member>
       <member><code>__invoke(mixed $arguments): mixed</code></member>
       <member><code>__isset(string $name): bool</code></member>
       <member><code>__serialize(): array</code></member>
       <member><code>__set(string $name, mixed $value): void</code></member>
       <member><code>__set_state(array $properties): object</code></member>
       <member><code>__sleep(): array</code></member>
       <member><code>__unserialize(array $data): void</code></member>
       <member><code>__unset(string $name): void</code></member>
       <member><code>__wakeup(): void</code></member>
      </simplelist>
      <!-- RFC: https://wiki.php.net/rfc/magic-methods-signature -->
     </para>
    </listitem>
    <listitem>
     <para>
      Las claves de array de <function>call_user_func_array</function> ahora se interpretarán como
      nombres de parámetros, en lugar de ser silenciosamente ignoradas.
     </para>
    </listitem>
    <listitem>
     <para>
      Declarar una función llamada <literal>assert()</literal> dentro de un espacio de nombres ya no
      está permitido y emite <constant>E_COMPILE_ERROR</constant>. La función
      <function>assert</function> está sujeta a un tratamiento especial por parte del motor, lo que
      puede llevar a un comportamiento inconsistente al definir una función con espacio de nombres con
      el mismo nombre.
     </para>
    </listitem>
   </itemizedlist>
  </sect3>
 </sect2>

 <sect2 xml:id="migration80.incompatible.resource2object">
  <title>Migración de recursos a objetos</title>

  <para>
   Varios &resource;s han sido migrados a &object;s.
   Las comprobaciones de valores de retorno que utilizan <function>is_resource</function> deben ser reemplazadas por comprobaciones de &false;.
  </para>
  <itemizedlist>
    <listitem>
     <para>
      <function>curl_init</function> ahora devolverá un objeto <classname>CurlHandle</classname> en lugar de
      un &resource;. La función <function>curl_close</function> ya no tiene efecto;
      en su lugar, la instancia de <classname>CurlHandle</classname> se destruye automáticamente si ya no
      es referenciada.
     </para>
    </listitem>
    <listitem>
     <para>
      <function>curl_multi_init</function> ahora devolverá un objeto <classname>CurlMultiHandle</classname>
      en lugar de un &resource;. La función <function>curl_multi_close</function> ya no
      tiene efecto; en su lugar, la instancia de <classname>CurlMultiHandle</classname> se destruye
      automáticamente si ya no es referenciada.
     </para>
    </listitem>
    <listitem>
     <para>
      <function>curl_share_init</function> ahora devolverá un objeto <classname>CurlShareHandle</classname>
      en lugar de un &resource;. La función <function>curl_share_close</function> ya no
      tiene efecto; en su lugar, la instancia de <classname>CurlShareHandle</classname> se destruye
      automáticamente si ya no es referenciada.
     </para>
    </listitem>
   <listitem>
    <para>
     <function>enchant_broker_init</function> ahora devolverá un objeto <classname>EnchantBroker</classname>
     en lugar de un &resource;.
    </para>
   </listitem>
   <listitem>
    <para>
     <function>enchant_broker_request_dict</function> y
     <function>enchant_broker_request_pwl_dict</function> ahora devolverán un objeto
     <classname>EnchantDictionary</classname> en lugar de un &resource;.
    </para>
   </listitem>
   <listitem>
    <para>
     La extensión GD ahora utiliza objetos <classname>GdImage</classname> como estructura de datos subyacente
     para las imágenes, en lugar de &resource;s.
     La función <function>imagedestroy</function> ya no tiene efecto; en su lugar, la instancia de
     <classname>GdImage</classname> se destruye automáticamente si ya no es referenciada.
    </para>
   </listitem>
   <listitem>
    <para>
     <function>openssl_x509_read</function> y <function>openssl_csr_sign</function> ahora devolverán
     un objeto <classname>OpenSSLCertificate</classname> en lugar de un &resource;.
     La función <function>openssl_x509_free</function> está obsoleta y ya no tiene efecto;
     en su lugar, la instancia de <classname>OpenSSLCertificate</classname> se destruye automáticamente si
     ya no es referenciada.
    </para>
   </listitem>
   <listitem>
    <para>
     <function>openssl_csr_new</function> ahora devolverá un objeto
     <classname>OpenSSLCertificateSigningRequest</classname> en lugar de un &resource;.
    </para>
   </listitem>
   <listitem>
    <para>
     <function>openssl_pkey_new</function> ahora devolverá un objeto
     <classname>OpenSSLAsymmetricKey</classname> en lugar de un &resource;.
     La función <function>openssl_pkey_free</function> está obsoleta y ya no tiene efecto;
     en su lugar, la instancia de <classname>OpenSSLAsymmetricKey</classname> se destruye automáticamente si
     ya no es referenciada.
    </para>
   </listitem>
   <listitem>
     <para>
      <function>shmop_open</function> ahora devolverá un objeto <classname>Shmop</classname> en lugar de
      un &resource;. La función <function>shmop_close</function> ya no tiene efecto, y está
      obsoleta; en su lugar, la instancia de <classname>Shmop</classname> se destruye automáticamente si ya no
      es referenciada.
     </para>
    </listitem>
   <listitem>
    <para>
     <function>socket_create</function>, <function>socket_create_listen</function>,
     <function>socket_accept</function>, <function>socket_import_stream</function>,
     <function>socket_addrinfo_connect</function>, <function>socket_addrinfo_bind</function> y
     <function>socket_wsaprotocol_info_import</function> ahora devolverán un objeto
     <classname>Socket</classname> en lugar de un &resource;.
     <function>socket_addrinfo_lookup</function> ahora devolverá un array de objetos
     <classname>AddressInfo</classname> en lugar de &resource;s.
    </para>
   </listitem>
   <listitem>
    <para>
     <function>msg_get_queue</function> ahora devolverá un objeto <classname>SysvMessageQueue</classname>
     en lugar de un &resource;.
    </para>
   </listitem>
   <listitem>
    <para>
     <function>sem_get</function> ahora devolverá un objeto <classname>SysvSemaphore</classname>
     en lugar de un &resource;.
    </para>
   </listitem>
   <listitem>
    <para>
     <function>shm_attach</function> ahora devolverá un objeto <classname>SysvSharedMemory</classname>
     en lugar de un &resource;.
    </para>
   </listitem>
   <listitem>
    <para>
     <function>xml_parser_create</function> y <function>xml_parser_create_ns</function> ahora
     devolverán un objeto <classname>XMLParser</classname> en lugar de un &resource;. La función
     <function>xml_parser_free</function> ya no tiene efecto; en su lugar, la instancia de XMLParser
     se destruye automáticamente si ya no es referenciada.
    </para>
   </listitem>
   <listitem>
    <para>
     Las funciones de <link linkend="book.xmlwriter">XMLWriter</link> ahora aceptan y devuelven, respectivamente,
     objetos <classname>XMLWriter</classname> en lugar de &resource;s.
    </para>
   </listitem>
   <listitem>
    <para>
     <function>inflate_init</function> ahora devolverá un objeto <classname>InflateContext</classname>
     en lugar de un &resource;.
    </para>
   </listitem>
   <listitem>
    <para>
     <function>deflate_init</function> ahora devolverá un objeto <classname>DeflateContext</classname>
     en lugar de un &resource;.
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.com">
  <title>COM y .Net (Windows)</title>

  <para>
   La capacidad de importar constantes que no distinguen entre mayúsculas y minúsculas desde bibliotecas de tipos ha sido eliminada.
   El segundo argumento de <function>com_load_typelib</function> ya no puede ser false;
   <link linkend="ini.com.autoregister-casesensitive">com.autoregister_casesensitive</link>
   ya no puede ser deshabilitado; los marcadores que no distinguen entre mayúsculas y minúsculas en
   <link linkend="ini.com.typelib-file">com.typelib_file</link> son ignorados.
  </para>
 </sect2>

 <sect2 xml:id="migration80.incompatible.curl">
  <title>CURL</title>

  <para>
   <constant>CURLOPT_POSTFIELDS</constant> ya no acepta objetos como arrays. Para
   interpretar un objeto como un array, se debe realizar una conversión explícita con <code>(array)</code>. Lo
   mismo aplica para otras opciones que aceptan arrays.
  </para>
 </sect2>

 <sect2 xml:id="migration80.incompatible.datetime">
  <title>Date y Time</title>

  <para>
   <function>mktime</function> y <function>gmmktime</function> ahora requieren al menos un
   argumento. Se puede utilizar <function>time</function> para obtener la marca de tiempo actual.
  </para>
 </sect2>

 <sect2 xml:id="migration80.incompatible.dom">
  <title>DOM</title>

  <para>
   Las clases no implementadas de la extensión DOM que no tenían comportamiento y contenían datos
   de prueba han sido eliminadas. Estas clases también han sido eliminadas en la última versión
   del estándar DOM:
  </para>
  <para>
   <simplelist>
    <member>DOMNameList</member>
    <member>DomImplementationList</member>
    <member>DOMConfiguration</member>
    <member>DomError</member>
    <member>DomErrorHandler</member>
    <member>DOMImplementationSource</member>
    <member>DOMLocator</member>
    <member>DOMUserDataHandler</member>
    <member>DOMTypeInfo</member>
   </simplelist>
  </para>
 </sect2>

 <sect2 xml:id="migration80.incompatible.enchant">
  <title>Enchant</title>

  <itemizedlist>
   <listitem>
    <para>
     <function>enchant_broker_list_dicts</function>, <function>enchant_broker_describe</function> y
     <function>enchant_dict_suggest</function> ahora devolverán un array vacío en lugar de &null;.
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.exif">
  <title>Exif</title>

  <para>
   <function>read_exif_data</function> ha sido eliminada; debe usarse
   <function>exif_read_data</function> en su lugar.
  </para>
 </sect2>

 <sect2 xml:id="migration80.incompatible.filter">
  <title>Filter</title>

  <itemizedlist>
   <listitem>
    <para>
     Las flags <constant>FILTER_FLAG_SCHEME_REQUIRED</constant> y
     <constant>FILTER_FLAG_HOST_REQUIRED</constant> del filtro
     <constant>FILTER_VALIDATE_URL</constant> han sido eliminadas. El <literal>scheme</literal>
     y el <literal>host</literal> son (y han sido) siempre requeridos.
    </para>
   </listitem>
   <listitem>
    <para>
     Las fuentes <constant>INPUT_REQUEST</constant> e <constant>INPUT_SESSION</constant> para
     <function>filter_input</function> etc. han sido eliminadas. Nunca fueron implementadas y su
     uso siempre generaba una advertencia.
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.gd">
  <title>GD</title>

  <itemizedlist>
   <listitem>
    <para>
     La función obsoleta <function>image2wbmp</function> ha sido eliminada.
     <!-- RFC: https://wiki.php.net/rfc/image2wbmp -->
    </para>
   </listitem>
   <listitem>
    <para>
     Las funciones obsoletas <function>png2wbmp</function> y <function>jpeg2wbmp</function> han
     sido eliminadas.
     <!-- RFC: https://wiki.php.net/rfc/deprecate-png-jpeg-2wbmp -->
    </para>
   </listitem>
   <listitem>
    <para>
     El parámetro <parameter>mode</parameter> predeterminado de <function>imagecropauto</function> ya no
     acepta <literal>-1</literal>. Debe usarse <constant>IMG_CROP_DEFAULT</constant> en su lugar.
    </para>
   </listitem>
   <listitem>
    <para>
     En Windows, <filename>php_gd2.dll</filename> ha sido renombrado a <filename>php_gd.dll</filename>.
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.gmp">
  <title>GMP</title>

  <para>
   <function>gmp_random</function> ha sido eliminada. Debe usarse
   <function>gmp_random_range</function> o <function>gmp_random_bits</function> en su lugar.
  </para>
 </sect2>

 <sect2 xml:id="migration80.incompatible.iconv">
  <title>Iconv</title>

  <para>
   Las implementaciones de iconv que no establecen correctamente <varname>errno</varname> en caso de errores
   ya no son soportadas.
  </para>
 </sect2>

 <sect2 xml:id="migration80.incompatible.imap">
  <title>IMAP</title>

  <itemizedlist>
   <listitem>
    <para>
     El argumento no utilizado <parameter>default_host</parameter> de <function>imap_headerinfo</function>
     ha sido eliminado.
    </para>
   </listitem>
   <listitem>
    <para>
     La función <function>imap_header</function>, que es un alias de
     <function>imap_headerinfo</function>, ha sido eliminada.
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.intl">
  <title>Funciones de internacionalización</title>

  <itemizedlist>
   <listitem>
    <para>
     La constante obsoleta <constant>INTL_IDNA_VARIANT_2003</constant> ha sido eliminada.
     <!-- RFC: https://wiki.php.net/rfc/deprecate-and-remove-intl_idna_variant_2003 -->
    </para>
   </listitem>
   <listitem>
   <para>
    La constante obsoleta <constant>Normalizer::NONE</constant> ha sido eliminada.
   </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.ldap">
  <title>LDAP</title>

  <itemizedlist>
   <listitem>
   <para>
    Las funciones obsoletas <function>ldap_sort</function>,
    <function>ldap_control_paged_result</function> y
    <function>ldap_control_paged_result_response</function> han sido eliminadas.
   </para>
  </listitem>
  <listitem>
   <para>
    La interfaz de <function>ldap_set_rebind_proc</function> ha cambiado; el parámetro
    <parameter>callback</parameter> ya no acepta cadenas vacías; debe usarse &null;
    en su lugar.
   </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.mbstring">
  <title>MBString</title>

  <itemizedlist>
   <listitem>
    <para>
     La directiva <link linkend="ini.mbstring.func-overload">mbstring.func_overload</link> ha sido
     eliminada. Las constantes relacionadas <constant>MB_OVERLOAD_MAIL</constant>,
     <constant>MB_OVERLOAD_STRING</constant> y <constant>MB_OVERLOAD_REGEX</constant>
     también han sido eliminadas. Finalmente, las entradas <literal>"func_overload"</literal> y
     <literal>"func_overload_list"</literal> en <function>mb_get_info</function> han sido
     eliminadas.
    </para>
   </listitem>
   <listitem>
    <para>
     <function>mb_parse_str</function> ya no puede usarse sin especificar un array de resultados.
    </para>
   </listitem>
   <listitem>
    <para>
     Se han eliminado varios alias obsoletos de mbregex. Consulte la siguiente
     lista para saber qué funciones deben usarse en su lugar:
    </para>
    <para>
     <simplelist>
      <member><function>mbregex_encoding</function> → <function>mb_regex_encoding</function></member>
      <member><function>mbereg</function> → <function>mb_ereg</function></member>
      <member><function>mberegi</function> → <function>mb_eregi</function></member>
      <member><function>mbereg_replace</function> → <function>mb_ereg_replace</function></member>
      <member><function>mberegi_replace</function> → <function>mb_eregi_replace</function></member>
      <member><function>mbsplit</function> → <function>mb_split</function></member>
      <member><function>mbereg_match</function> → <function>mb_ereg_match</function></member>
      <member><function>mbereg_search</function> → <function>mb_ereg_search</function></member>
      <member><function>mbereg_search_pos</function> → <function>mb_ereg_search_pos</function></member>
      <member><function>mbereg_search_regs</function> → <function>mb_ereg_search_regs</function></member>
      <member><function>mbereg_search_init</function> → <function>mb_ereg_search_init</function></member>
      <member><function>mbereg_search_getregs</function> → <function>mb_ereg_search_getregs</function></member>
      <member><function>mbereg_search_getpos</function> → <function>mb_ereg_search_getpos</function></member>
      <member><function>mbereg_search_setpos</function> → <function>mb_ereg_search_setpos</function></member>
     </simplelist>
    </para>
   </listitem>
   <listitem>
    <para>
     El modificador <literal>e</literal> para <function>mb_ereg_replace</function> ha sido eliminado.
     Debe usarse <function>mb_ereg_replace_callback</function> en su lugar.
    </para>
   </listitem>
   <listitem>
    <para>
     Un argumento de patrón que no sea una cadena para <function>mb_ereg_replace</function> ahora será interpretado como
     una cadena en lugar de un punto de código ASCII. El comportamiento anterior puede restaurarse con una llamada
     explícita a <function>chr</function>.
    </para>
   </listitem>
   <listitem>
    <para>
     El argumento <parameter>needle</parameter> para <function>mb_strpos</function>,
     <function>mb_strrpos</function>, <function>mb_stripos</function>,
     <function>mb_strripos</function>, <function>mb_strstr</function>,
     <function>mb_stristr</function>, <function>mb_strrchr</function> y
     <function>mb_strrichr</function> ahora puede estar vacío.
    </para>
   </listitem>
   <listitem>
    <para>
     El parámetro <parameter>is_hex</parameter>, que no se utilizaba internamente, ha sido eliminado de
     <function>mb_decode_numericentity</function>.
    </para>
   </listitem>
   <listitem>
    <para>
     El comportamiento heredado de pasar la codificación como tercer argumento en lugar de un desplazamiento para la
     función <function>mb_strrpos</function> ha sido eliminado; en su lugar, debe proporcionarse un desplazamiento
     explícito de <literal>0</literal> con la codificación como cuarto argumento.
    </para>
   </listitem>
   <listitem>
    <para>
     Los alias de codificación de caracteres <literal>ISO_8859-*</literal> han sido reemplazados por
     los alias <literal>ISO8859-*</literal> para una mejor interoperabilidad con la extensión iconv. Los
     alias de mbregex ISO 8859 con guiones bajos (<literal>ISO_8859_*</literal> y
     <literal>ISO8859_*</literal>) también han sido eliminados.
    </para>
   </listitem>
   <listitem>
    <para>
     <function>mb_ereg</function> y <function>mb_eregi</function> ahora devolverán &true; booleano en
     una coincidencia exitosa. Anteriormente devolvían el entero <literal>1</literal> si no se pasaba
     <parameter>matches</parameter>, o <code>max(1, strlen($matches[0]))</code> si
     se pasaba <parameter>matches</parameter>.
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.oci8">
  <title>OCI8</title>

  <itemizedlist>
   <listitem>
    <para>
     La clase <classname>OCI-Lob</classname> ahora se llama <classname>OCILob</classname>, y la
     clase <classname>OCI-Collection</classname> ahora se llama <classname>OCICollection</classname>
     para el cumplimiento de nombres impuesto por las herramientas de anotación de tipos arginfo de PHP 8.
    </para>
   </listitem>
   <listitem>
    <para>
     Varias funciones alias han sido marcadas como obsoletas.
    </para>
   </listitem>
   <listitem>
    <para>
     <function>oci_internal_debug</function> y su alias <function>ociinternaldebug</function> han
     sido eliminados.
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.odbc">
  <title>ODBC</title>

  <itemizedlist>
   <listitem>
    <para>
     <function>odbc_connect</function> ya no reutiliza las conexiones.
    </para>
   </listitem>
   <listitem>
    <para>
     El parámetro no utilizado <parameter>flags</parameter> de <function>odbc_exec</function> ha sido
     eliminado.
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.openssl">
  <title>OpenSSL</title>

  <itemizedlist>
   <listitem>
    <para>
     <function>openssl_seal</function> y <function>openssl_open</function> ahora requieren
     que se pase el parámetro <parameter>method</parameter>, ya que el valor predeterminado anterior de
     <literal>"RC4"</literal> se considera inseguro.
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.pcre">
  <title>Expresiones regulares (compatibles con Perl)</title>

  <para>
   Al pasar secuencias de escape no válidas, estas ya no se interpretan como literales. Este
   comportamiento requería anteriormente el modificador <literal>X</literal>, que ahora se ignora.
  </para>
 </sect2>

 <sect2 xml:id="migration80.incompatible.pdo">
  <title>PHP Data Objects</title>

  <itemizedlist>
   <listitem>
    <para>
     El modo de gestión de errores predeterminado ha sido cambiado de "silent" a "exceptions". Consulte
     <link linkend="pdo.error-handling">Errores y gestión de errores</link> para más detalles.
     <!-- RFC: https://wiki.php.net/rfc/pdo_default_errmode -->
    </para>
   </listitem>
   <listitem>
    <para>
     Las firmas de algunos métodos de PDO han cambiado:
    </para>
    <para>
     <simplelist>
      <member><code>PDO::query(string $query, ?int $fetchMode  = null, mixed  ...$fetchModeArgs)</code></member>
      <member><code>PDOStatement::setFetchMode(int $mode, mixed ...$args)</code></member>
     </simplelist>
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.pdo-odbc">
  <title>PDO ODBC</title>

  <para>
   La directiva &php.ini;
   <link linkend="ini.pdo-odbc.db2-instance-name">pdo_odbc.db2_instance_name</link> ha sido
   eliminada.
  </para>
 </sect2>

 <sect2 xml:id="migration80.incompatible.pdo-mysql">
  <title>PDO MySQL</title>

  <para>
   <methodname>PDO::inTransaction</methodname> ahora informa del estado real de la transacción
   de la conexión, en lugar de una aproximación mantenida por PDO. Si se ejecuta una consulta
   sujeta a "implicit commit", <methodname>PDO::inTransaction</methodname> devolverá
   posteriormente &false;, ya que la transacción ya no está activa.
  </para>
 </sect2>

 <sect2 xml:id="migration80.incompatible.pgsql">
  <title>PostgreSQL</title>

  <itemizedlist>
   <listitem>
    <para>
     La sintaxis obsoleta de <function>pg_connect</function> que utiliza múltiples parámetros en lugar
     de una cadena de conexión ya no es compatible.
    </para>
   </listitem>
   <listitem>
    <para>
     La firma obsoleta de <function>pg_lo_import</function> y <function>pg_lo_export</function>
     que pasa la conexión como último argumento ya no es compatible. La conexión debe
     pasarse como primer argumento.
    </para>
   </listitem>
   <listitem>
    <para>
     <function>pg_fetch_all</function> ahora devuelve un array vacío en lugar de &false; para
     conjuntos de resultados con cero filas.
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.phar">
  <title>Phar</title>

  <para>
   Los metadatos asociados a un phar ya no se deserializan automáticamente, para corregir
   posibles vulnerabilidades de seguridad debidas a la instanciación de objetos, la carga
   automática, etc.
   <!-- RFC: https://wiki.php.net/rfc/phar_stop_autoloading_metadata -->
  </para>
 </sect2>

 <sect2 xml:id="migration80.incompatible.reflection">
  <title>Reflection</title>

  <itemizedlist>
   <listitem>
    <para>
     Las firmas de los métodos
    </para>
    <para>
     <simplelist>
      <member><code>ReflectionClass::newInstance($args)</code></member>
      <member><code>ReflectionFunction::invoke($args)</code></member>
      <member><code>ReflectionMethod::invoke($object, $args)</code></member>
     </simplelist>
    </para>
    <para>
     han sido cambiadas a:
    </para>
    <para>
     <simplelist>
      <member><code>ReflectionClass::newInstance(...$args)</code></member>
      <member><code>ReflectionFunction::invoke(...$args)</code></member>
      <member><code>ReflectionMethod::invoke($object, ...$args)</code></member>
     </simplelist>
    </para>
    <para>
     El código que debe ser compatible tanto con PHP 7 como con PHP 8 puede utilizar las
     siguientes firmas para ser compatible con ambas versiones:
    </para>
    <para>
     <simplelist>
      <member><code>ReflectionClass::newInstance($arg = null, ...$args)</code></member>
      <member><code>ReflectionFunction::invoke($arg = null, ...$args)</code></member>
      <member><code>ReflectionMethod::invoke($object, $arg = null, ...$args)</code></member>
     </simplelist>
    </para>
   </listitem>
   <listitem>
    <para>
     El método <methodname>ReflectionType::__toString</methodname> ahora devuelve una representación
     completa de depuración del tipo y ya no está obsoleto. En particular, el resultado incluirá un
     indicador de nulabilidad para los tipos anulables. El formato del valor de retorno no es estable
     y puede cambiar entre versiones de PHP.
    </para>
   </listitem>
   <listitem>
    <para>
     Los métodos export() de Reflection han sido eliminados.
     En su lugar, los objetos de reflexión pueden ser convertidos a string.
    </para>
   </listitem>
   <listitem>
    <para>
     <methodname>ReflectionMethod::isConstructor</methodname> y
     <methodname>ReflectionMethod::isDestructor</methodname> ahora también devuelven &true; para
     los métodos <link linkend="object.construct">__construct()</link> y
     <link linkend="object.destruct">__destruct()</link> de las interfaces.
     Anteriormente, esto solo era cierto para los métodos de clases y traits.
    </para>
   </listitem>
   <listitem>
    <para>
     El método <methodname>ReflectionType::isBuiltin</methodname> ha sido movido a
     <classname>ReflectionNamedType</classname>. <classname>ReflectionUnionType</classname> no
     lo tiene.
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.sockets">
  <title>Sockets</title>

  <itemizedlist>
   <listitem>
    <para>
     Las constantes obsoletas <constant>AI_IDN_ALLOW_UNASSIGNED</constant> y
     <constant>AI_IDN_USE_STD3_ASCII_RULES</constant> del parámetro <parameter>flags</parameter> de
     <function>socket_addrinfo_lookup</function> han sido eliminadas.
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.spl">
  <title>Standard PHP Library (SPL)</title>

  <itemizedlist>
   <listitem>
    <para>
     <methodname>SplFileObject::fgetss</methodname> ha sido eliminado.
    </para>
   </listitem>
   <listitem>
    <para>
     <methodname>SplFileObject::seek</methodname> ahora siempre se posiciona al inicio de la línea.
     Anteriormente, las posiciones <literal>=1</literal> se posicionaban al inicio de la línea siguiente.
    </para>
   </listitem>
   <listitem>
    <para>
     <methodname>SplHeap::compare</methodname> ahora especifica una firma de método. Las clases
     herederas que implementen este método deben utilizar una firma de método compatible.
    </para>
   </listitem>
   <listitem>
    <para>
     <methodname>SplDoublyLinkedList::push</methodname>,
     <methodname>SplDoublyLinkedList::unshift</methodname> y
     <methodname>SplQueue::enqueue</methodname> ahora devuelven <type>void</type> en lugar de &true;.
    </para>
   </listitem>
   <listitem>
    <para>
     <function>spl_autoload_register</function> ahora siempre lanza un
     <classname>TypeError</classname> con argumentos no válidos, por lo que el segundo argumento
     <parameter>do_throw</parameter> se ignora y se emitirá un aviso si se establece a &false;.
    </para>
   </listitem>
   <listitem>
    <para>
     <classname>SplFixedArray</classname> ahora es un <interfacename>IteratorAggregate</interfacename>
     y no un <interfacename>Iterator</interfacename>.
     <methodname>SplFixedArray::rewind</methodname>, <methodname>SplFixedArray::current</methodname>,
     <methodname>SplFixedArray::key</methodname>, <methodname>SplFixedArray::next</methodname> y
     <methodname>SplFixedArray::valid</methodname> han sido eliminados. En su lugar,
     se ha añadido <methodname>SplFixedArray::getIterator</methodname>. Todo código que utilice
     iteración explícita sobre SplFixedArray debe obtener ahora un
     <interfacename>Iterator</interfacename> a través de
     <methodname>SplFixedArray::getIterator</methodname>. Esto significa que
     <classname>SplFixedArray</classname> ahora es seguro de usar en bucles anidados.
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.standard">
  <title>Biblioteca estándar</title>

  <itemizedlist>
   <listitem>
    <para>
     <function>assert</function> ya no evaluará argumentos de tipo string, en su lugar se
     tratarán como cualquier otro argumento. Se debe usar <code>assert($a == $b)</code> en lugar de
     <code>assert('$a == $b')</code>. La directiva ini <link
     linkend="ini.assert.quiet-eval">assert.quiet_eval</link> y la constante
     <constant>ASSERT_QUIET_EVAL</constant> también han sido eliminadas, ya que no tendrían
     ningún efecto.
    </para>
   </listitem>
   <listitem>
    <para>
     <function>parse_str</function> ya no puede utilizarse sin especificar un array de resultados.
    </para>
   </listitem>
   <listitem>
    <para>
     El filtro <link linkend="filters.string.strip_tags">string.strip_tags</link> ha sido eliminado.
    </para>
   </listitem>
   <listitem>
    <para>
     El argumento <parameter>needle</parameter> de <function>strpos</function>,
     <function>strrpos</function>, <function>stripos</function>, <function>strripos</function>,
     <function>strstr</function>, <function>strchr</function>, <function>strrchr</function> y
     <function>stristr</function> ahora siempre se interpretará como un string. Anteriormente, los
     needle que no eran string se interpretaban como un punto de código ASCII. Se puede usar una
     llamada explícita a <function>chr</function> para restaurar el comportamiento anterior.
    </para>
   </listitem>
   <listitem>
    <para>
     El argumento <parameter>needle</parameter> de <function>strpos</function>,
     <function>strrpos</function>, <function>stripos</function>, <function>strripos</function>,
     <function>strstr</function>, <function>stristr</function> y <function>strrchr</function> ahora
     puede estar vacío.
    </para>
   </listitem>
   <listitem>
    <para>
     El argumento <parameter>length</parameter> de <function>substr</function>,
     <function>substr_count</function>, <function>substr_compare</function> y
     <function>iconv_substr</function> ahora puede ser &null;. Los valores &null; se comportarán
     como si no se hubiera proporcionado el argumento de longitud y, por lo tanto, devolverán el
     resto del string en lugar de un string vacío.
    </para>
   </listitem>
   <listitem>
    <para>
     El argumento <parameter>length</parameter> de <function>array_splice</function> ahora puede ser
     &null;. Los valores &null; se comportarán de forma idéntica a omitir el argumento, eliminando
     así todo desde el <parameter>offset</parameter> hasta el final del array.
    </para>
   </listitem>
   <listitem>
    <para>
     El argumento <parameter>args</parameter> de <function>vsprintf</function>,
     <function>vfprintf</function> y <function>vprintf</function> ahora debe ser un array.
     Anteriormente se aceptaba cualquier tipo.
    </para>
   </listitem>
   <listitem>
    <para>
     La opción <literal>'salt'</literal> de <function>password_hash</function> ya no es
     compatible. Si se usa la opción <literal>'salt'</literal>, se genera una advertencia, la sal
     proporcionada se ignora y se usa una sal generada automáticamente.
    </para>
   </listitem>
   <listitem>
    <para>
     La función <function>quotemeta</function> ahora devuelve un string vacío si se le pasa un
     string vacío. Anteriormente se devolvía &false;.
    </para>
   </listitem>
   <listitem>
    <para>
     Las siguientes funciones han sido eliminadas:
    </para>
    <para>
     <simplelist>
      <member><function>hebrevc</function></member>
      <member><function>convert_cyr_string</function></member>
      <member><function>money_format</function></member>
      <member><function>ezmlm_hash</function></member>
      <member><function>restore_include_path</function></member>
      <member><function>get_magic_quotes_gpc</function></member>
      <member><function>get_magic_quotes_runtime</function></member>
      <member><function>fgetss</function></member>
     </simplelist>
    </para>
   </listitem>
   <listitem>
    <para>
     <constant>FILTER_SANITIZE_MAGIC_QUOTES</constant> ha sido eliminada.
    </para>
   </listitem>
   <listitem>
    <para>
     Llamar a <function>implode</function> con los parámetros en orden inverso <code>($pieces,
     $glue)</code> ya no es compatible.
    </para>
   </listitem>
   <listitem>
    <para>
     <function>parse_url</function> ahora distingue las consultas y fragmentos ausentes de los vacíos:
    </para>
    <para>
     <simplelist>
      <member><code>http://example.com/foo → query = null, fragment = null</code></member>
      <member><code>http://example.com/foo? → query = "",   fragment = null</code></member>
      <member><code>http://example.com/foo# → query = null, fragment = ""</code></member>
      <member><code>http://example.com/foo?# → query = "",   fragment = ""</code></member>
     </simplelist>
      Anteriormente, en todos los casos, query y fragment eran &null;.
    </para>
   </listitem>
   <listitem>
    <para>
     <function>var_dump</function> y <function>debug_zval_dump</function> ahora muestran los
     números de punto flotante utilizando <link linkend="ini.serialize-precision">serialize_precision</link>
     en lugar de <link linkend="ini.precision">precision</link>. En una configuración predeterminada,
     esto significa que los números de punto flotante ahora se muestran con total precisión por estas
     funciones de depuración.
    </para>
   </listitem>
   <listitem>
    <para>
     Si el array devuelto por <link linkend="object.sleep">__sleep()</link> contiene propiedades
     inexistentes, estas ahora se ignoran silenciosamente. Anteriormente, tales propiedades se habrían
     serializado como si tuvieran el valor &null;.
    </para>
   </listitem>
   <listitem>
    <para>
     La configuración regional predeterminada al inicio ahora es siempre <literal>"C"</literal>.
     Ninguna configuración regional se hereda del entorno de forma predeterminada. Anteriormente,
     <constant>LC_ALL</constant> se establecía en <literal>"C"</literal>, mientras que
     <constant>LC_CTYPE</constant> se heredaba del entorno. Sin embargo, algunas funciones no
     respetaban la configuración regional heredada sin una llamada explícita a
     <function>setlocale</function>. Ahora siempre se requiere una llamada explícita a
     <function>setlocale</function> si se desea cambiar un componente de la configuración regional
     respecto al valor predeterminado.
    </para>
   </listitem>
   <listitem>
    <para>
     El respaldo obsoleto DES en <function>crypt</function> ha sido eliminado. Si se pasa un formato
     de sal desconocido a <function>crypt</function>, la función fallará con <literal>*0</literal>
     en lugar de recurrir a un hash DES débil.
    </para>
   </listitem>
   <listitem>
    <para>
     Especificar rondas fuera de rango para SHA256/SHA512 en <function>crypt</function> ahora
     fallará con <literal>*0</literal> en lugar de ajustar al límite más cercano. Esto coincide
     con el comportamiento de glibc.
    </para>
   </listitem>
   <listitem>
    <para>
     El resultado de las funciones de ordenación puede haber cambiado si el array contiene
     elementos que se comparan como iguales.
    </para>
   </listitem>
   <listitem>
    <para>
     Cualquier función que acepte callbacks que no estén especificados explícitamente para aceptar
     parámetros por referencia ahora emitirá una advertencia si se usa un callback con parámetros
     por referencia. Los ejemplos incluyen <function>array_filter</function> y
     <function>array_reduce</function>. Este ya era el caso para la mayoría, pero no todas, las
     funciones anteriormente.
    </para>
   </listitem>
   <listitem>
    <para>
     El envolvente de flujo HTTP, tal como lo usan funciones como <function>file_get_contents</function>,
     ahora anuncia HTTP/1.1 en lugar de HTTP/1.0 de forma predeterminada. Esto no cambia el
     comportamiento del cliente, pero puede hacer que los servidores respondan de manera diferente.
     Para mantener el comportamiento anterior, se debe establecer la opción de contexto de flujo
     <literal>'protocol_version'</literal>, p. ej.
    </para>
    <para>
     <programlisting role="php">
<![CDATA[
<?php
$ctx = stream_context_create(['http' => ['protocol_version' => '1.0']]);
echo file_get_contents('http://example.org', false, $ctx);
?>
]]>
     </programlisting>
    </para>
   </listitem>
   <listitem>
    <para>
     Llamar a <function>crypt</function> sin una sal explícita ya no es compatible. Para producir
     un hash fuerte con una sal generada automáticamente, se debe usar
     <function>password_hash</function> en su lugar.
    </para>
   </listitem>
   <listitem>
    <para>
    <function>substr</function>, <function>mb_substr</function>, <function>iconv_substr</function> y
    <function>grapheme_substr</function> ahora ajustan de manera consistente los desplazamientos
    fuera de los límites al límite del string. Anteriormente, se devolvía &false; en lugar del
    string vacío en algunos casos.
    </para>
   </listitem>
   <listitem>
    <para>
     En Windows, las funciones de ejecución de programas (<function>proc_open</function>,
     <function>exec</function>, <function>popen</function>, etc.) que usan el shell, ahora ejecutan
     de manera consistente <command>%comspec% /s /c "$commandline"</command>, lo que tiene el mismo
     efecto que ejecutar <command>$commandline</command> (sin comillas adicionales).
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.sysvsem">
  <title>Sysvsem</title>

  <itemizedlist>
   <listitem>
    <para>
     El parámetro <parameter>auto_release</parameter> de <function>sem_get</function> ha sido
     modificado para aceptar valores bool en lugar de int.
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.tidy">
  <title>Tidy</title>

  <itemizedlist>
   <listitem>
    <para>
     El parámetro <parameter>use_include_path</parameter>, que no se usaba internamente, ha sido
     eliminado de <function>tidy_repair_string</function>.
    </para>
   </listitem>
   <listitem>
    <para>
     <methodname>tidy::repairString</methodname> y <methodname>tidy::repairFile</methodname> se han
     convertido en métodos estáticos.
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.tokenizer">
  <title>Tokenizer</title>

  <itemizedlist>
   <listitem>
    <para>
     Los tokens <literal>T_COMMENT</literal> ya no incluirán un salto de línea al final. El salto
     de línea será parte del siguiente token <literal>T_WHITESPACE</literal>. Cabe señalar que
     <literal>T_COMMENT</literal> no siempre va seguido de un espacio en blanco, también puede ir
     seguido de <literal>T_CLOSE_TAG</literal> o del final del archivo.
    </para>
   </listitem>
   <listitem>
    <para>
     Los nombres con espacio de nombres ahora se representan utilizando los tokens
     <literal>T_NAME_QUALIFIED</literal> (<code>Foo\Bar</code>),
     <literal>T_NAME_FULLY_QUALIFIED</literal> (<code>\Foo\Bar</code>) y
     <literal>T_NAME_RELATIVE</literal> (<code>namespace\Foo\Bar</code>).
     <literal>T_NS_SEPARATOR</literal> solo se usa para separadores de espacio de nombres
     independientes, y solo es sintácticamente válido en conjunto con declaraciones de uso de grupo.
     <!-- RFC: https://wiki.php.net/rfc/namespaced_names_as_token -->
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.xmlreader">
  <title>XMLReader</title>

  <para>
   <methodname>XMLReader::open</methodname> y <methodname>XMLReader::xml</methodname> ahora son
   métodos estáticos. Todavía pueden llamarse como métodos de instancia, pero las clases herederas
   deben declararlos como estáticos si sobrescriben estos métodos.
  </para>
 </sect2>

 <sect2 xml:id="migration80.incompatible.xmlrpc">
  <title>XML-RPC</title>

  <para>
   La extensión XML-RPC ha sido movida a PECL y ya no forma parte de la distribución
   de PHP.
  </para>
 </sect2>

 <sect2 xml:id="migration80.incompatible.zip">
  <title>Zip</title>

  <para>
   <constant>ZipArchive::OPSYS_Z_CPM</constant> ha sido eliminada (el nombre era un error
   tipográfico). Se debe usar <constant>ZipArchive::OPSYS_CPM</constant> en su lugar.
  </para>
 </sect2>

 <sect2 xml:id="migration80.incompatible.zlib">
  <title>Zlib</title>

  <itemizedlist>
   <listitem>
    <para>
     <function>gzgetss</function> ha sido eliminada.
    </para>
   </listitem>
   <listitem>
    <para>
     <link linkend="ini.zlib.output-compression">zlib.output_compression</link> ya no se
     desactiva automáticamente para <literal>Content-Type: image/*</literal>.
    </para>
   </listitem>
  </itemizedlist>
 </sect2>

 <sect2 xml:id="migration80.incompatible.php-test-packs">
  <title>Paquetes de pruebas de PHP para Windows</title>

  <para>
   El ejecutor de pruebas ha sido renombrado de <filename>run-test.php</filename> a
   <filename>run-tests.php</filename>, para coincidir con su nombre en php-src.
  </para>
 </sect2>
</sect1>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
