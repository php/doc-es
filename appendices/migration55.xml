<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: c8e0df5f35214f64fadb31a5149c2bd2cfdc4aa3 Maintainer: seros Status: ready -->
<!-- Reviewed: no -->
<!-- Based on UPGRADING version 322438. Work in progess !-->

<appendix xml:id="migration55" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>Migrar de PHP 5.4.x a PHP 5.5.x</title>
 <simpara>
  &manual.migration.seealso;
  <link linkend="migration5">5.0.x</link>,
  <link linkend="migration51">5.1.x</link>,
  <link linkend="migration52">5.2.x</link>,
  <link linkend="migration53">5.3.x</link>,
  <link linkend="migration54">5.4.x</link> y
  <link linkend="migration56">5.6.x</link>.
 </simpara>
 
 <sect1 xml:id="migration55.changes">
  <title>Qué ha cambiado en PHP 5.5.x</title>
  <simpara>
   La mayoria de las mejoras de PHP 5.5.x no tienen impacto en el código existente. Hay
   <link linkend="migration55.incompatible">varias incompatibilidades</link>
   y <link linkend="migration55.new-features">nuevas características</link> que deberían
   ser consideradas, ya que el código debería probarse antes de cambiar de versión
   de PHP en ambientes de producción.   
  </simpara>
  <simpara>
   Para sistemas que se actualicen desde una versión anterior de PHP, la documentación
   correspondiente está disponible en:  
  </simpara>
  <itemizedlist>
   <listitem>
    <simpara>
     <link linkend="migration54">Notas de actualización para PHP 5.4.x</link>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="migration53">Notas de actualización para PHP 5.3.x</link>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="migration52">Notas de actualización para PHP 5.2.x</link>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="migration51">Notas de actualización para PHP 5.1.x</link>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     <link linkend="migration5">Migrar de PHP 4 a PHP 5</link>.
    </simpara>
   </listitem>
  </itemizedlist>
 </sect1>
 
 <sect1 xml:id="migration55.incompatible">
  <title>Cambios incompatibles con versiones anteriores</title>
  <simpara>
   Aunque la mayoría del código de PHP 5 existente debería funtionar sin cambios, se ha
   de tomar nota de algunos cambios incompatibles con versiones anteriores:   
  </simpara>
  
  <sect2 xml:id="migration55.incompatible.windows">
   <title>Eliminado el soporte para Windows XP y 2003</title>
   
   <para>
    El soporte para Windows XP y 2003 ha sido eliminado. Las construcciones de PHP para
    Windows ahora requieren Windows Vista o superior.    
   </para>
  </sect2>
  
  <sect2 xml:id="migration55.incompatible.case">
   <title>La no consideración de mayúsculas/minúsculas ya no es específica de la configuración regional</title>
   
   <para>
    Todas las comparaciones que no estiman las mayúsculas/minúsculas de funciones, clases y nombres de constantes,
    ahora se realizan de una manera independiente de la configuración regional según las reglas de ASCII.
    Esto mejora el soporte para idiomas que usan el alfabeto latino con reglas de cotejamiento
    no usuales, tales como el turco o el azerí.
   </para>
   <para>
    Esto podría causar problemas para el código que usa comparaciones que no consideran las mayúsculas/minúsculas para
    caracteres distintos a los de ASCII en conjuntos de caracteres multibyte (incluyendo UTF-8), como
    carecteres acentuados en muchos idiomas europeos. Si se tiene un código base distinto
    del inglés y que no sea ASCII, será necesario probar que no se depende
    inadvertidamente de este comportamiento antes de utilizar PHP 5.5 para
    sistemas de producción.
   </para>
  </sect2>
  
  <sect2 xml:id="migration55.incompatible.pack">
   <title>Cambios de <function>pack</function> y <function>unpack</function></title>
   
   <para>
    Se introdujeron cambios en <function>pack</function> y
    <function>unpack</function> para hacerlos más compatibles con Perl:
   </para>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <function>pack</function> ahora admite el código de formato "Z", el cual
      tiene un comportamiento idéntico al de "a".
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>unpack</function> ahora admite el códio de formato "Z" para cadenas con
      relleno NULL, y se comporta como lo hacía "a" en versiones anteriores: eliminará
      los bytes NULL sobrantes.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>unpack</function> ahora mantiene los bytes NULL sobrantes cuando se usa
      el código de formato "a".      
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>unpack</function> ahora elimina los espacios en blanco ASCII sobrantes
      cuando se usa el código de formato "A".
     </simpara>
    </listitem>
   </itemizedlist>
   
   <para>
    Escribir código retrocompatible que use el código de formato "a" con
    <function>unpack</function> requiere el uso de
    <function>version_compare</function>, debido a la rotura de
    retrocompatibilidad.
   </para>
   <para>
    Por ejemplo:
   </para>
   <informalexample>
    <programlisting role="php">
<![CDATA[
<?php
// Código anterior:
$data = unpack('a5', $packed);

// Código nuevo:
if (version_compare(PHP_VERSION, '5.5.0-dev', '>=')) {
  $data = unpack('Z5', $packed);
} else {
  $data = unpack('a5', $packed);
}
?>
]]>
    </programlisting>
   </informalexample>
  </sect2>
  
  <sect2 xml:id="migration55.incompatible.self-parent-static">
   <title><literal>self</literal>, <literal>parent</literal> y <literal>static</literal> ahora nunca consideran las mayúsculas/minúsculas</title>
   
   <para>
    Antes de PHP 5.5, existían casos donde las palabras clave
    <link linkend="language.oop5.paamayim-nekudotayim">self</link>,
    <link linkend="language.oop5.paamayim-nekudotayim">parent</link>, y
    <link linkend="language.oop5.late-static-bindings">static</link>
    eran tratadas de forma que consideraban las mayúsculas/minúsculas. Ahora se ha
    solucionado, y esta palabras clave siempre son manejadas para no considerarlas:
    <literal>SELF::CONSTANT</literal> ahora es tratada de forma idéntica a
    <literal>self::CONSTANT</literal>.
   </para>
  </sect2>
  
  <sect2 xml:id="migration55.incompatible.guid">
   <title>Eliminados los GUIDs de logos de PHP</title>
   
   <para>
    Los GUIDs que anteriormente resultaban en la generación de PHP de varios logos han
    sido eliminados. Esto incluye la eliminación de las funciones que devuelven esots
    GUIDs. Las funciones eliminadas son:
   </para>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <function>php_logo_guid</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>php_egg_logo_guid</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>php_real_logo_guid</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>zend_logo_guid</function>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
  
  <sect2 xml:id="migration55.incompatible.execution">
   <title>Cambios en la ejecución interna</title>
   
   <para>
    Los autores de extensiones debería observar que la función <command>zend_execute()</command>
    ya no puede ser sobrescrita, y que se han hecho numerosos cambios
    a la estructura <literal>execute_data</literal> y funciones y métodos
    relacionados que manejan códigos de operación.
   </para>
   
   <para>
    A la mayoría de los autores de extensiones esto no les afecta, pero aquellos que escriban
    extensiones que dependan fuertemente del Motor Zend deberían leer
    <link linkend="migration55.internals">las notas sobre estos cambios</link>.
   </para>
  </sect2>
 </sect1>
 
 <sect1 xml:id="migration55.new-features">
  <title>Nuevas caracteristicas</title>
  
  <sect2 xml:id="migration55.new-features.generators">
   <title>Se han añadido los <link linkend="language.generators">Generadores</link></title>
   
   <para>
    El soporte para <link linkend="language.generators">generadores</link> ha sido
    añadido mediante la palabra reservada <command>yield</command>. Los generadores proporcionan una
    manera sencilla de implementar iteradores simples sin la carga adicional o la complejidad
    de implementar una clase que implemente la interfaz
    <classname>Iterator</classname>.
   </para>
   
   <para>
    Un ejemplo sencillo que reimplementa la función <function>range</function>
    como un generador (al menos para valores positivos de
    <literal>paso</literal>):
   </para>
   
   <informalexample>
    <programlisting role="php">
<![CDATA[
<?php
function xrange($inicio, $límite, $paso = 1) {
    for ($i = $inicio; $i <= $límite; $i += $paso) {
        yield $i;
    }
}

echo 'Números impares de un dígito: ';

/*
 * Observe que nunca se crea o devuelve un array,
 * lo que ahorra memoria.
 */
foreach (xrange(1, 9, 2) as $número) {
    echo "$número ";
}

echo "\n";
?>
]]>
    </programlisting>
    &example.outputs;
    <screen>
<![CDATA[
Números impares de un dígito: 1 3 5 7 9 
]]>
    </screen>
   </informalexample>
  </sect2>
  
  <sect2 xml:id="migration55.new-features.finally">
   <title>Se ha añadido la palabra reservada &finally;</title>
   
   <para>
    Los bloques &try;-&catch; ahora admiten un bloque &finally; para el código que debería
    ejecutarse pese a si se ha lanzado una excepción o no.
   </para>
  </sect2>
  
  <sect2 xml:id="migration55.new-features.password">
   <title>Nueva API de hash de contraseñas</title>
   
   <para>
    Se ha añadido una <link linkend="book.password">nueva API de hash de contraseñas</link>
    que facilita el empleo de hash de forma segura y administrar contraseñas usando la
    misma biblioteca subyacente como <function>crypt</function> de PHP. Véase la
    documentaicón para <function>password_hash</function> para más detalles.
   </para>
  </sect2>
  
  <sect2 xml:id="migration55.new-features.foreach-list">
   <title><link linkend="control-structures.foreach"><literal>foreach</literal></link> ahora admite <function>list</function></title>
   
   <para>
    La esctructura de control <link linkend="control-structures.foreach">foreach</link>
    ahora admite el desempaquetamiento de arrays anidados en variables por separado mediante
    el constructor <function>list</function>. Por ejemplo:
   </para>
   
   <informalexample>
    <programlisting role="php">
<![CDATA[
<?php
$array = [
    [1, 2],
    [3, 4],
];

foreach ($array as list($a, $b)) {
    echo "A: $a; B: $b\n";
}
?>
]]>
    </programlisting>
    &example.outputs;
    <screen>
<![CDATA[
A: 1; B: 2
A: 3; B: 4
]]>
    </screen>
   </informalexample>
   
   <para>
    Hay disponible más información en
    la página del manual de
    <link linkend="control-structures.foreach.list">foreach</link>.
   </para>
  </sect2>
  
  <sect2 xml:id="migration55.new-features.empty">
   <title><function>empty</function> admite expresiones arbitrarias</title>
   
   <para>
    Ahora se admite pasar una expresión arbitraria en lugar de una
    variable a <function>empty</function>. Por ejemplo:
   </para>
   
   <informalexample>
    <programlisting role="php">
<![CDATA[
<?php
function siempre_falso() {
    return false;
}

if (empty(siempre_falso())) {
    echo "Esto se imprimirá.\n";
}

if (empty(true)) {
    echo "Esto no se imprimirá.\n";
}
?>
]]>
    </programlisting>
    &example.outputs;
    <screen>
<![CDATA[
Esto se imprimirá.
]]>
    </screen>
   </informalexample>
  </sect2>
  
  <sect2 xml:id="migration55.new-features.const-dereferencing">
   <title><type>array</type> and <type>string</type> literal dereferencing</title>
   
   <para>
    Los <type>array</type>s y los literales de tipo <type>string</type> ahora se pueden
    derreferenciar directamente para acceder a elementos y caracteres individuales:
    
    <informalexample>
     <programlisting role="php">
<![CDATA[
<?php
echo 'Derreferencición de array: ';
echo [1, 2, 3][0];
echo "\n";

echo 'Derreferencición de string: ';
echo 'PHP'[0];
echo "\n";
?>
]]>
     </programlisting>
     &example.outputs;
     <screen>
<![CDATA[
Derreferencición de array: 1
Derreferencición de string: P
]]>
     </screen>
    </informalexample>
   </para>
  </sect2>
  
  <sect2 xml:id="migration55.new-features.class-name">
   <title>Resolución del nombre de una clase mediane <link linkend="language.oop5.basic.class.class">::class</link></title>
   
   <para>
    Es posible usar <literal>NombreClase::class</literal> para obtener el nombre de clase
    completamente cualificado de <literal>NombreClase</literal>. Por ejemplo:
    
    <informalexample>
     <programlisting role="php">
<![CDATA[
<?php
namespace Espacio\De\Nombres;
class NombreClase {}

echo NombreClase::class;

echo "\n";
?>
]]>
     </programlisting>
     &example.outputs;
     <screen>
<![CDATA[
Espacio\De\Nombres\NombreClase
]]>
     </screen>
    </informalexample>
   </para>
  </sect2>
  
  <sect2 xml:id="migration55.new-features.opcache">
   <title>Se añadió la extensión <link linkend="book.opcache">OPcache</link></title>
   
   <para>
    La caché de códigos de operación de Zend Optimiser+ se ha añadido a PHP como la nueva
    <link linkend="book.opcache">extensión OPcache</link>.
    OPcache mejora el rendimiento de PHP almacenando código de byte de un script precompilado en
    la memoria compartida, eliminando así la necesidad por parte de PHP de cargar y analizar scripts
    en cada petición. Véase
    <link linkend="opcache.installation">las instrucciones de instalación</link>
    para más detalles de cómo habilitar y usar OPcache.
   </para>
  </sect2>
  
  <sect2 xml:id="migration55.new-features.non-scalar-iterator-keys">
   <title><link linkend="control-structures.foreach"><literal>foreach</literal></link> ahora admite claves no escalares</title>
   
   <para>
    <link linkend="control-structures.foreach">foreach</link> ahora admite
    claves de cualquier tipo. Aunque las claves no escalares no pueden darse en arrays nativos de PHP,
    es posible que <methodname>Iterator::key</methodname> devuelva un
    valor de cualquier tipo, por lo que ahora serán tratados correctamente.
   </para>
  </sect2>
  
  <sect2 xml:id="migration55.new-features.windows-apache">
   <title>Manejador de Apache 2.4 soportado en Windows</title>
   
   <para>
    La SAPI del manejador de Apache 2.4 ahora está soportada en Windows.
   </para>
  </sect2>
  
  <sect2 xml:id="migration55.new-features.gd">
   <title>Mejoras a GD</title>
   
   <para>
    Se han realizado varias mejoras a la extensión GD, las cuales son:
   </para>
   
   <itemizedlist>
    <listitem>
     <simpara>
      Soporte para volteo usando la nueva función
      <function>imageflip</function>.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Soporte para recorte avanzado usando las funciones <function>imagecrop</function> y 
      <function>imagecropauto</function>.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Soporte para lectura y escritura de WebP usando <function>imagecreatefromwebp</function> 
      y <function>imagewebp</function> respectivamente.
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
 </sect1>
 
 <sect1 xml:id="migration55.deprecated">
  <title>Características obsoletas en PHP 5.5.x</title>
  
  <sect2 xml:id="migration55.deprecated.mysql">
   <title>Obsolescencia de <link linkend="book.mysql">ext/mysql</link></title>
   
   <para>
    La <link linkend="book.mysql">extensión de MySQL original</link> ahora está
    obsoleta, generando errores de nivel <constant>E_DEPRECATED</constant>
    al conectarse a una base de datos. Emplee en su lugar las extensiones
    <link linkend="book.mysqli">MySQLi</link> o
    <link linkend="ref.pdo-mysql">PDO_MySQL</link>.
   </para>
  </sect2>
  
  <sect2 xml:id="migration55.deprecated.preg-replace-e">
   <title>Modificador <literal>/e</literal> de <function>preg_replace</function></title>
   
   <para>
    El modificador <literal>/e</literal> de <function>preg_replace</function> ahora
    está obsoleto. Emplee en su lugar la función
    <function>preg_replace_callback</function>.
   </para>
  </sect2>
  
  <sect2 xml:id="migration55.deprecated.intl">
   <title>Obsolescencias de <link linkend="book.intl">intl</link></title>
   
   <para>
    <methodname>IntlDateFormatter::setTimeZoneID</methodname> y
    <function>datefmt_set_timezone_id</function> ahora están obsoletas. Emplee en
    su lugar el método <methodname>IntlDateFormatter::setTimeZone</methodname> y la función
    <function>datefmt_set_timezone</function> respectivamente.
   </para>
  </sect2>
  
  <sect2 xml:id="migration55.deprecated.mcrypt">
   <title>Obsolescencias de <link linkend="book.mcrypt">mcrypt</link></title>
   
   <simpara>
    Las siguientes funciones están obsoletas:
   </simpara>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <function>mcrypt_cbc</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>mcrypt_cfb</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>mcrypt_ecb</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>mcrypt_ofb</function>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
 </sect1>
 
 <sect1 xml:id="migration55.changed-functions">
  <title>Cambios en funciones</title>
  
  <sect2 xml:id="migration55.changed-functions.core">
   <title>Núcleo de PHP</title>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <function>set_error_handler</function> se puede invocar con &null; como
      un argumento para reiniciar el gestor de errores.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Cuando se invoca con &null;, <function>set_error_handler</function> y
      <function>set_exception_handler</function> ahora devuelven el error anterior
      o el gestor de excepciones, respectivamente.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>json_encode</function> ahora acepta el parámetro
      <parameter>depth</parameter>.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      El comportamiento de <function>pack</function> y
      <function>unpack</function> con los códigos de formato "a" y "A" ha
      cambiado.
      <link linkend="migration55.incompatible.pack">Hay disponibles notas detalladas sobres estos cambios.</link>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
  
  <sect2 xml:id="migration55.changed-functions.intl">
   <title><link linkend="book.intl">intl</link></title>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <methodname>MessageFormatter::format</methodname> y las funciones relacionadas
      ahora aceptan argumentos con nombre y argumentos mixtos numéricos y con conmbre cuando PHP
      está vinculado a ICU 4.8 o posterior.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <methodname>MessageFormatter::format</methodname> y las funciones relacionadas
      ya no provocan un error cuando se proporciona un número insfuciente de
      argumentos. En su lubar, no serán reemplazadas las variables de sustitución.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <methodname>MessageFormatter::format</methodname> y
      <methodname>MessageFormatter::parse</methodname> ya no están limitados a
      una segunda precisión al tratar con horas.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <methodname>IntlDateFormatter::__construct</methodname> y
      <function>datefmt_create</function> ahora aceptan objetos
      <classname>IntlTimeZone</classname> y
      <classname>DateTimeZone</classname> para el argumento
      <parameter>timezone</parameter>, y objetos
      <classname>IntlCalendar</classname> para el argumento
      <parameter>calendar</parameter>. Además, si se omite la zona
      horaria y <parameter>calendar</parameter> no especifica una,
      ahora se usa la zona horaria predeterminada de PHP de 
      <function>date_default_timezone_get</function> en lugar de la
      zona horaria predeterminada de ICU.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <methodname>IntlDateFormatter::getCalendar</methodname> y
      <function>datefmt_get_calendar</function> devuelven false si el objeto
      <classname>IntlDateFormatter</classname> fue creado con una instancia de
      <classname>IntlCalendar</classname> en lugar de con una de las constantes de
      <classname>IntlDateFormatter</classname>.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <methodname>IntlDateFormatter::setCalendar</methodname> y
      <function>datefmt_set_calendar</function> ahora aceptan objetos
      <classname>IntlCalendar</classname> además de constantes de
      <classname>IntlDateFormatter</classname>.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <methodname>IntlDateFormatter::format</methodname> y
      <function>datefmt_format</function> ahora aceptan objetos
      <classname>IntlCalendar</classname>.
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
 </sect1>
 
 <sect1 xml:id="migration55.new-functions">
  <title>Nuevas funciones</title>
  
  <sect2 xml:id="migration55.new-functions.core">
   <title>Núcleo de PHP</title>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <function>array_column</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>boolval</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>json_last_error_msg</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>password_get_info</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>password_hash</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>password_needs_rehash</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>password_verify</function>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
  
  <sect2 xml:id="migration55.new-functions.hash">
   <title><link linkend="book.hash">Hash</link></title>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <function>hash_pbkdf2</function>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
  
  <sect2 xml:id="migration55.new-functions.openssl">
   <title><link linkend="book.openssl">OpenSSL</link></title>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <function>openssl_pbkdf2</function>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
  
  <sect2 xml:id="migration55.new-functions.curl">
   <title><link linkend="book.curl">cURL</link></title>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <function>curl_escape</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>curl_file_create</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>curl_multi_setopt</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>curl_multi_strerror</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>curl_pause</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>curl_reset</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>curl_share_close</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>curl_share_init</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>curl_share_setopt</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>curl_strerror</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>curl_unescape</function>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
  
  <sect2 xml:id="migration55.new-functions.gd">
   <title><link linkend="book.image">GD</link></title>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <function>imageaffinematrixconcat</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>imageaffinematrixget</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>imagecrop</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>imagecropauto</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>imageflip</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>imagepalettetotruecolor</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>imagescale</function>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
  
  <sect2 xml:id="migration55.new-functions.mysqli">
   <title><link linkend="book.mysqli">MySQLi</link></title>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <function>mysqli_begin_transaction</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>mysqli_release_savepoint</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>mysqli_savepoint</function>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
  
  <sect2 xml:id="migration55.new-functions.pgsql">
   <title><link linkend="book.pgsql">PostgreSQL</link></title>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <function>pg_escape_literal</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>pg_escape_identifier</function>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
  
  <sect2 xml:id="migration55.new-functions.sockets">
   <title><link linkend="book.sockets">Sockets</link></title>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <function>socket_sendmsg</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>socket_recvmsg</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>socket_cmsg_space</function>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>  
  
  <sect2 xml:id="migration55.new-functions.cli">
   <title><link linkend="features.commandline">CLI</link></title>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <function>cli_get_process_title</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>cli_set_process_title</function>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
  
  <sect2 xml:id="migration55.new-functions.intl">
   <title><link linkend="book.intl">Intl</link></title>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <function>datefmt_format_object</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>datefmt_get_calendar_object</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>datefmt_get_timezone</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>datefmt_set_timezone</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>datefmt_get_calendar_object</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_create_instance</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_keyword_values_for_locale</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_now</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_available_locales</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_time</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_set_time</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_add</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_set_time_zone</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_after</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_before</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_set</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_roll</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_clear</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_field_difference</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_actual_maximum</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_actual_minimum</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_day_of_week_type</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_first_day_of_week</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_greatest_minimum</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_least_maximum</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_locale</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_maximum</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_minimal_days_in_first_week</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_minimum</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_time_zone</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_type</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_weekend_transition</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_in_daylight_time</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_is_equivalent_to</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_is_lenient</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_is_set</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_is_weekend</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_set_first_day_of_week</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_set_lenient</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_equals</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_repeated_wall_time_option</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_skipped_wall_time_option</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_set_repeated_wall_time_option</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_set_skipped_wall_time_option</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_from_date_time</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_to_date_time</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_error_code</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlcal_get_error_message</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlgregcal_create_instance</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlgregcal_set_gregorian_change</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlgregcal_get_gregorian_change</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intlgregcal_is_leap_year</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_create_time_zone</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_create_default</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_get_id</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_get_gmt</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_get_unknown</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_create_enumeration</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_count_equivalent_ids</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_create_time_zone_id_enumeration</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_get_canonical_id</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_get_region</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_get_tz_data_version</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_get_equivalent_id</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_use_daylight_time</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_get_offset</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_get_raw_offset</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_has_same_rules</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_get_display_name</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_get_dst_savings</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_from_date_time_zone</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_to_date_time_zone</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_get_error_code</function>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <function>intltz_get_error_message</function>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
  
  <sect2 xml:id="migration55.new-features.spl">
   <title><link linkend="book.spl">SPL</link></title>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <methodname>SplFixedArray::__wakeup</methodname>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
 </sect1>
 
 <sect1 xml:id="migration55.classes">
  <title>Nuevas clases e interfaces</title>
  
  <sect2 xml:id="migration55.classes.curl">
   <title><link linkend="book.curl">cURL</link></title>
   <itemizedlist>
    <listitem>
     <simpara>
      <classname>CURLFile</classname>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
  
  <sect2 xml:id="migration55.classes.datetime">
   <title><link linkend="book.datetime">Fecha y Hora</link></title>
   <itemizedlist>
    <listitem>
     <simpara>
      <classname>DateTimeImmutable</classname>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <classname>DateTimeInterface</classname>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
  
  <sect2 xml:id="migration55.classes.intl">
   <title><link linkend="book.intl">Intl</link></title>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <classname>IntlCalendar</classname>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <classname>IntlGregorianCalendar</classname>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <classname>IntlTimeZone</classname>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <classname>IntlBreakIterator</classname>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <classname>IntlRuleBasedBreakIterator</classname>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <classname>IntlCodePointBreakIterator</classname>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
 </sect1>
 
 <sect1 xml:id="migration55.new-methods">
  <title>Nuevos métodos</title>
  
  <sect2 xml:id="migration55.new-methods.mysqli">
   <title><link linkend="book.mysqli">MySQLi</link></title>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <methodname>mysqli::begin_transaction</methodname>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <methodname>mysqli::release_savepoint</methodname>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <methodname>mysqli::savepoint</methodname>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
  
  <sect2 xml:id="migration55.new-methods.intl">
   <title><link linkend="book.intl">Intl</link></title>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <methodname>IntlDateFormatter::formatObject</methodname>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <methodname>IntlDateFormatter::getCalendarObject</methodname>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <methodname>IntlDateFormatter::getTimeZone</methodname>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <methodname>IntlDateFormatter::setTimeZone</methodname>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
 </sect1>
 
 <sect1 xml:id="migration55.extensions-other">
  <title>Otros cambios a extensiones</title>
  
  <sect2 xml:id="migration55.extensions-other.intl">
   <title><link linkend="book.intl">Intl</link></title>
   
   <para>
    La extensión <link linkend="book.intl">intl</link> ahora requiere ICU 4.0
    o posterior.
   </para>
  </sect2>
 </sect1>
 
 <sect1 xml:id="migration55.global-constants">
  <title>Nuevas constantes globales</title>
  
  <sect2 xml:id="migration55.global-constants.gd">
   <title><link linkend="book.image">GD</link></title>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <constant>IMG_AFFINE_TRANSLATE</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_AFFINE_SCALE</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_AFFINE_ROTATE</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_AFFINE_SHEAR_HORIZONTAL</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_AFFINE_SHEAR_VERTICAL</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_CROP_DEFAULT</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_CROP_TRANSPARENT</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_CROP_BLACK</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_CROP_WHITE</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_CROP_SIDES</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_FLIP_BOTH</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_FLIP_HORIZONTAL</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_FLIP_VERTICAL</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_BELL</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_BESSEL</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_BICUBIC</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_BICUBIC_FIXED</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_BLACKMAN</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_BOX</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_BSPLINE</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_CATMULLROM</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_GAUSSIAN</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_GENERALIZED_CUBIC</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_HERMITE</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_HAMMING</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_HANNING</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_MITCHELL</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_POWER</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_QUADRATIC</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_SINC</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_NEAREST_NEIGHBOUR</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_WEIGHTED4</constant>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <constant>IMG_TRIANGLE</constant>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
  
  <sect2 xml:id="migration55.global-constants.json">
   <title><link linkend="book.json">JSON</link></title>
   
   <itemizedlist>
    <listitem>
     <simpara>
      <link linkend="constant.json-error-recursion"><constant>JSON_ERROR_RECURSION</constant></link>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <link linkend="constant.json-error-inf-or-nan"><constant>JSON_ERROR_INF_OR_NAN</constant></link>
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <link linkend="constant.json-error-unsupported-type"><constant>JSON_ERROR_UNSUPPORTED_TYPE</constant></link>
     </simpara>
    </listitem>
   </itemizedlist>
  </sect2>
  
  <sect2 xml:id="migration55.global-constants.mysqli">
   <title><link linkend="book.mysqli">MySQLi</link></title>
   
   <para>
    Se ha añadido la opción <constant>MYSQLI_SERVER_PUBLIC_KEY</constant>
    para utlizarla con <function>mysqli_options</function>.
   </para>
  </sect2>
 </sect1>
 
 <sect1 xml:id="migration55.ini">
  <title>Cambios en el manejor de fichero INI</title>
  
  <sect2 xml:id="migrations55.ini.intl">
   <title><link linkend="book.intl">Intl</link></title>
   
   <para>
    Se ha añadido la directiva de configuración <literal>intl.use_exceptions</literal>,
    la cual controla el comportamiento de intl cuando ocurren errores globales
    junto con la ya existente directiva de configuración
    <literal>intl.error_level</literal>.
   </para>
  </sect2>
  
  <sect2 xml:id="migration55.ini.mysqlnd">
   <title><link linkend="book.mysqlnd">MySQLnd</link></title>
   
   <para>
    Se ha añadido la directiva de configuración
    <link linkend="ini.mysqlnd.sha256-server-public-key">mysqlnd.sha256_server_public_key</link>
    para permitir a <link linkend="book.mysqli">mysqli</link> emplear el nuevo protocolo
    de autenticación de MySQL.
   </para>
  </sect2>
 </sect1>
 
 <sect1 xml:id="migration55.internals">
  <title>Cambios internos en PHP</title>
  
  <itemizedlist>
   <listitem>
    <simpara>
     Las extensiones ya no pueden sobrescribir <command>zend_execute()</command>, por lo que
     deberían sobrescribir en su lugar <command>zend_execute_ex()</command>.
     <literal>EG(current_execute_data)</literal> ya están inicializado en
     <command>zend_execute_ex()</command>, por lo que pordría ser necesario el empleo de
     <literal>EG(current_execute_data)-&gt;prev_execute_data</literal> en su lugar para que
     las extensiones sean compatibles.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Se eliminó <literal>EG(arg_types_stack)</literal>,
     <literal>EX(fbc)</literal>, <literal>EX(called_scope)</literal> y
     <literal>EX(current_object)</literal>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Se añadió <literal>op_array-&gt;nested_calls</literal>, la cual se calcula
     en tiempo de compilación.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Se añadió <literal>EX(call_slots)</literal>, la cual es un array para almacenar
     información sobre llamadas anidadas sintácticamente (p.ej.,
     <literal>foo(bar())</literal>) y es preasignada junto con
     <literal>execute_data</literal>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Se añadió <literal>EX(call)</literal>, la cual es un puntero a la función
     llamada en uso; es un elemento de <literal>EX(call_slots)</literal>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Los códigos de operación
     <link linkend="internals2.opcodes.init-method-call">INIT_METHOD_CALL</link>,
     <link linkend="internals2.opcodes.init-static-method-call">ZEND_INIT_STATIC_METHOD_CALL</link>,
     <link linkend="internals2.opcodes.init-fcall-by-name">ZEND_INIT_FCALL_BY_NAME</link>
     y
     <link linkend="internals2.opcodes.init-ns-fcall-by-name">ZEND_INIT_NS_FCALL_BY_NAME</link>
     emplean <literal>result.num</literal> como índice en
     <literal>EX(call_slots)</literal>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     El código de operación <link linkend="internals2.opcodes.new">ZEND_NEW</link> emplea
     <literal>extended_value</literal> como índice en
     <literal>EX(call_slots)</literal>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Los códigos de operación <link linkend="internals2.opcodes.do-fcall">ZEND_DO_FCALL</link>
     y
     <link linkend="internals2.opcodes.do-fcall-by-name">ZEND_DO_FCALL_BY_NAME</link>
     emplean <literal>op2.num</literal> como índice en
     <literal>EX(call_slots)</literal>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Se añadió <literal>op_array-&gt;used_stack</literal>, la cual es calculada en
     tiempo de compilación; el espacio de pila correspondiente es preasignado junto con
     <literal>execute_data</literal>. Como resultado, los códigos de operación ZEND_SEND* y
     ZEND_DO_FCALL* ya no necesitan verificar desbordamientos de pila.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Se eliminó el campo <literal>execute_data-&gt;Ts</literal>. Las variables temporales de
     la máquina virtual se asignan siempre inmediatamente antes de la estructura
     <literal>execute_data</literal>, por lo que ahora se pueden acceder a dichas variables por su
     índice desde el puntero base de <literal>execute_data</literal> en lugar de
     mediante <literal>execute_data-&gt;Ts</literal>. El compilador almacena los nuevos
     índices en <literal>op_array-&gt;opcodes[*].op?.num</literal>. Las macros
     <command>EX_TMP_VAR()</command> y <command>EX_TMP_VAR_NUM()</command>
     se pueden usar para acceder a las variables temporales por el índice o número. Se
     puede convertir el número a un índice mediante <command>EX_TMP_VAR_NUM(0,
     num)</command> o convertir de índice a número mediante
     <command>(EX_TMP_VAR_NUM(0,0)-EX_TMP_VAR(0,offset))</command>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Se eliminó el campo <literal>execute_data-&gt;CVs</literal>. La variables compiladas de
     la máquina virtual son siempre asignadas inmediantamente después de la estructura
     <literal>execute_data</literal>, or lo que ahora se pueden acceder a dichas variables por su
     índice desde el puntero base de <literal>execute_data</literal> en lugar de
     vmedianteia <literal>execute_data-&gt;CVs</literal>. Se puede emplear la macro
     <command>EX_CV_NUM()</command> para acceder a dichas variables compiladas mediante
     el número.
    </simpara>
   </listitem>
  </itemizedlist>
 </sect1>
</appendix>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
