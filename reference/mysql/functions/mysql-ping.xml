<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 1.5 $ -->
<!-- EN-Revision: 1.10 Maintainer: lboshell Status: ready -->
<refentry xml:id="function.mysql-ping" xmlns="http://docbook.org/ns/docbook">
 <refnamediv>
  <refname>mysql_ping</refname>
  <refpurpose>Efectuar un chequeo de respuesta (ping) sobre una
  conexión de servidor o reconectarse si no hay
  conexión</refpurpose>
 </refnamediv>

 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <type>bool</type><methodname>mysql_ping</methodname>
   <methodparam choice="opt"><type>resource</type><parameter>id_enlace</parameter></methodparam>
  </methodsynopsis>
  <para>
   Chequea si está activa o no la conexión con el servidor. Si ésta se ha
   caído, una reconexión automática es intentada. Esta función puede ser
   usada por scripts que permanecen pasivos durante largos espacios de
   tiempo, para chequear si el servidor ha cerrado la conexión, y
   reconectarse de ser necesario.
  </para>
  <note>
   <para>
    A partir de MySQL 5.0.13, la característica de reconexión automática se
    encuentra deshabilitada.
   </para>
  </note>
 </refsect1>

 <refsect1 role="parameters">
  &reftitle.parameters;
  <para>
   <variablelist>
    &mysql.linkid.description;
   </variablelist>
  </para>
 </refsect1>

 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   Devuelve &true; si la conexión con el servidor MySQL está funcionando, o
   &false; de lo contrario.
  </para>
 </refsect1>

 <refsect1 role="examples">
  &reftitle.examples;
  <para>
   <example>
    <title>Un ejemplo de <function>mysql_ping</function></title>
    <programlisting role="php">
<![CDATA[
<?php
set_time_limit(0);

$con = mysql_connect('localhost', 'mysqlusuario', 'mypassword');
$bd  = mysql_select_db('mi_bd');

/* Asumiendo que esta consulta toma mucho tiempo */
$resultado = mysql_query($sql);
if (!$resultado) {
    echo 'La consulta #1 falló, saliendo.';
    exit;
}

/* Asegurarse de que la conexión sigue viva, si no, intentar una
   re-conexión */
if (!mysql_ping($con)) {
    echo 'Se ha perdido la conexión, saliendo después de la consulta #1';
    exit;
}
mysql_free_result($result);

/* Ya que la conexión sigue viva, corramos otra consulta */
$resultado2 = mysql_query($sql2);
?>
]]>
    </programlisting>
   </example>
  </para>
 </refsect1>

 <refsect1 role="seealso">
  &reftitle.seealso;
  <para>
   <simplelist>
    <member><function>mysql_thread_id</function></member>
    <member><function>mysql_list_processes</function></member>
   </simplelist>
  </para>
 </refsect1>
</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
