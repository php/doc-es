<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision: 288721 $ -->
<!-- EN-Revision: af4410a7e15898c3dbe83d6ea38246745ed9c6fb Maintainer: seros Status: ready -->
<!-- Generated by xml_proto.php v2.3. Found in /scripts directory of phpdoc. -->
<refentry xml:id="function.win32-start-service-ctrl-dispatcher" xmlns="http://docbook.org/ns/docbook">
 <refnamediv>
  <refname>win32_start_service_ctrl_dispatcher</refname>
  <refpurpose>Registra el script con el ACS, por lo que puede actuar como el servicio con el nombre dado</refpurpose>
 </refnamediv>
 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <type>mixed</type><methodname>win32_start_service_ctrl_dispatcher</methodname>
   <methodparam><type>string</type><parameter>name</parameter></methodparam>
  </methodsynopsis>

  <para>
   Cuando de lanza mediante el Administrador de Control de Servicios, se requiere un porceso de
   servicio para "registralo" con él para establecer la supervisión del servicio y
   las características de comunicación. Esta función lleva a cabo el registro produciendo
   un hilo para manejar la comunicación a bajo nivel con el adminstrador de control de
   servicios.
  </para>
  <para>
   Una vez iniciado, el proceso de servicio debería continuar registrado con el
   administrador de control de servicios por lo que puede determinar si debería de finalizar.
   Esto se logra llamando periódicamente a
   <function>win32_get_last_control_message</function> y manejando el código de
   retorno apropiado.
  </para>


 </refsect1>
 <refsect1 role="parameters">
  &reftitle.parameters;
  <para>
   <variablelist>
    <varlistentry>
     <term><parameter>name</parameter></term>
     <listitem>
      <para>
       El nombre corto del servicio, como se registró mediante
       <function>win32_create_service</function>.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </para>
 </refsect1>
 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   Devuelve &true; si tuvo éxito, si no &false; o un código de error win32.
  </para>
 </refsect1>
 <refsect1 role="examples">
  &reftitle.examples;
  <para>
   <example>
    <title>Un ejemplo de <function>win32_start_service_ctrl_dispatcher</function></title>
    <para>
     Comprobar si el servicio se está ejecutando bajo el ACS.
    </para>
    <programlisting role="php">
<![CDATA[
<?php
if (!win32_start_service_ctrl_dispatcher('dummyphp')) {
  die("Probablemente no esté ejecutándome bajo el administrador de control de servicios");
}

while (WIN32_SERVICE_CONTROL_STOP != win32_get_last_control_message()) {
  # hacer su trabajo aquí, intentando no tomar más de 30 segundos antes de
  # ejecutar de nuevo el bucle
}
?>
]]>
    </programlisting>
   </example>
  </para>
 </refsect1>


 <refsect1 role="seealso">
  &reftitle.seealso;
  <para>
   <simplelist>
    <member><function>win32_get_last_control_message</function></member>
   </simplelist>
  </para>
 </refsect1>


</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
