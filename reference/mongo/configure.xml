<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 20d54ddc26f3709b83b21f7b41df785e2e0c3709 Maintainer: chuso Status: ready -->

<section xml:id="mongo.installation" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 &reftitle.install;
 <para>
  El controlador MongoDB para PHP debe funcionar en cualquier sistema: Windows, Mac OS X, 
  Unix, y Linux; pequeñas y grandes máquinas; y plataformas de 32- y 64-bits; PHP
  5.1, 5.2, y 5.3.
 </para>
 <para>
  &pecl.moved; Esta página proporciona información especifica acerca de la instalación en diferentes sistemas y solución de problemas que otros usuarios han resuelto.
 </para>

 <itemizedlist>
  <listitem>
   <para>
    <link xlink:href="#mongo.installation.nix">Instalación en *NIX</link>
   </para>
  </listitem>
  <listitem>
   <para>
    <link xlink:href="#mongo.installation.manual">Instalación manual</link>
   </para>
  </listitem>
  <listitem>
   <para>
    <link xlink:href="#mongo.installation.osx">OS X</link>
   </para>
  </listitem>
  <listitem>
   <para>
    <link xlink:href="#mongo.installation.gentoo">Gentoo</link>
   </para>
  </listitem>
  <listitem>
   <para>
    <link xlink:href="#mongo.installation.fedora">Fedora</link>
   </para>
  </listitem>
  <listitem>
   <para>
    <link xlink:href="#mongo.installation.windows">Instalación en Windows</link>
   </para>
  </listitem>
  <listitem>
   <para>
    <link xlink:href="#mongo.installation.thirdparty">Instrucciones de instalación de terceros</link>
   </para>
  </listitem>
 </itemizedlist>

 <section xml:id="mongo.installation.nix">
  <title>Instalación en *NIX</title>

  <para>
   Ejecute:
   <programlisting>
<![CDATA[

$ sudo pecl install mongo

]]>
   </programlisting>
  </para>
  
  <para>
   Si se está usando CentOS o Redhat, se puede isntalar desde un
   <link xlink:href="&url.mongodb.rpm;">RPM</link>.
  </para>
  
  <para>
   Agregar la siguiente línea en el fichero php.ini:
   <programlisting>
<![CDATA[

extension=mongo.so

]]>
   </programlisting>
  </para>

  <para>
   Si pecl se quedará sin memoria al instalar, asegúrese de que memory_limit en 
   php.ini sea de al menos de 32MB.
  </para>
 </section>

 <section xml:id="mongo.installation.manual">
  <title>Instalación manual</title>

  <para>Para los desarrolladores de controloladores y gente interesada en las últimas correcciones, 
   puede compilar el controlador desde las últimas versiones en 
   <link xlink:href="&url.mongodb.github;">Github</link>.
   Ir a Github y presione en el botón "download".  Ejecute:

   <programlisting>
<![CDATA[

$ tar zxvf mongodb-mongodb-php-driver-<commit_id>.tar.gz
$ cd mongodb-mongodb-php-driver-<commit_id>
$ phpize
$ ./configure
$ sudo make install

]]>
   </programlisting>
  </para>

  <para>
   Realice los siguientes cambios en php.ini:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     Asegúrese de que la variable <emphasis>extension_dir</emphasis> este apuntando a 
     la ubicación de <emphasis>mongo.so</emphasis>. El build se mostrará donde se encuetre 
     instalado el controlador de PHP, la salida será algo similar a esto:
     <programlisting>
<![CDATA[

      Installing '/usr/lib/php/extensions/no-debug-zts-20060613/mongo.so'

]]>
     </programlisting>

      Asegúrese de que este en el mismo directorio en donde PHP se encuentre, ejecute:

     <programlisting>
<![CDATA[

      $ php -i | grep extension_dir
        extension_dir => /usr/lib/php/extensions/no-debug-zts-20060613 =>
      /usr/lib/php/extensions/no-debug-zts-20060613  

]]>
     </programlisting>

     Si no es así, cambia <emphasis>extension_dir</emphasis> en php.ini o mueva <emphasis>mongo.so</emphasis>
    </para>
   </listitem>
   <listitem>
    <para>
     Para cargar la extensión en el arranque de PHP, agregar una línea:

     <programlisting>
<![CDATA[

      extension=mongo.so

]]>
     </programlisting>

    </para>
   </listitem>
  </itemizedlist>

  <section xml:id="mongo.installation.osx">
   <title>OS X</title>

   <para>
    Si su sistema no puede encontrar autoconf, necesitas instalar Xcode 
    (disponible en el DVD de instalación).
   </para>
   
   <para>
    Si usa XAMPP, debe compilar el driver con el 
    siguiente comando:
    <programlisting>
<![CDATA[

sudo /Applications/XAMPP/xamppfiles/bin/pecl install mongo

]]>
    </programlisting>
   </para>

   <para>
    Si usa MAMP ( o XAMPP y el comando anterior no funciona), 
    los binarios precompilados están disponibles en 
    <link xlink:href="&url.mongodb.github.downloads;">Github</link>
    (descargue la última versión con "osx" junto con el nombre que corresponda a la versión de 
    PHP).  Extraer mongo.so desde el fichero y añadalo al directorio de extensiones de MAMP o XAMPP. 
    Agregar 
    <programlisting>
<![CDATA[

      extension=mongo.so

]]>
    </programlisting>
    al fichero php.ini y reinicie el servidor.
   </para>
  </section>

  <section xml:id="mongo.installation.gentoo">
   <title>Gentoo</title>
   <para>
    Gentoo tiene un paquete para el driver de PHP que se llama dev-php5/mongo
    que puede ser instalado con:
   </para>
   <programlisting>
<![CDATA[

$ sudo emerge -va dev-php5/mongo

]]>
   </programlisting>

   <para>
    Si se utiliza PECL, quizá obtiene un error de versión incorrecta en libtool. 
    Compile desde las fuentes que necesite y ejecute aclocal y autoconf.
   </para> 
    <programlisting>
<![CDATA[

$ phpize && aclocal && autoconf && ./configure && make && make install

]]>
    </programlisting>
  </section>
  <section xml:id="mongo.installation.fedora">
   <title>Red Hat</title>
   <para>
    Incluye Fedora y CentOS
   </para>
   <para>
    En estos sistemas, la configuración por omisión de Apache no permite a las peticiones
    establecer conexiones de red, haciendo que el driver genere errores de "Permiso denegado"
    cuando se intenta conectar a la base de datos. Si este fuera el caso, pruebe
    a ejecutar:
    <programlisting>
<![CDATA[
$ /usr/sbin/setsebool -P httpd_can_network_connect 1
]]>
    </programlisting>
    Y finalmente reinicie Apache. (Este comportamiento también se da con SELinux.)
   </para>
  </section>
 </section>

 <section xml:id="mongo.installation.windows">
  <title>Instalación en Windows</title>

  <para>
   Los binarios precompilados para cada versión están disponibles en 
   <link xlink:href="&url.mongodb.github.downloads;">Github</link> para una gran variedad
   de combinaciones de versiones, seguridad en hilos, y bibliotecas VC. Descomprima el 
   fichero y copie php_mongo.dll en el directorio de extensiones de PHP ("ext" por 
   omisión).
  </para>

  <para>
   El último (no publicado) código se compila en archivos binarios en Windows en cada 
   commit.  El fichero zip cuenta los ficheros php_mongo.dll y version.txt.  
   Por favor mantega el fichero version.txt de modo que si presenta una pregunta o problema,
   pueda proporcionar a los desarrolladores la versión exacta en uso. (El número es 
   largo y sin sentido, pero tendrá sentido para los desarrolladores)
  </para>
  <para>
   Para obtener las últimas correcciones (y posiblemente errores), descargue el binario
   correspondiente a la versión instalada de PHP:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.vc652;">
      PHP 5.2 VC6 Non-Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.vc6ts52;">
      PHP 5.2 VC6 Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.vc6;">
      PHP 5.3 VC6 Non-Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.vc6ts;">
      PHP 5.3 VC6 Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.vc8;">
      PHP 5.3 VC8 Non-Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.vc8ts;">
      PHP 5.3 VC8 Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.vc9;">
      PHP 5.3 VC9 Non-Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.vc9ts;">
      PHP 5.3 VC9 Thread-Safe Mongo extension
     </link>
    </para>
   </listitem>
  </itemizedlist>

  <para>
   Agregar la siguiente línea al fichero php.ini:
   <programlisting>
<![CDATA[

extension=php_mongo.dll

]]>
   </programlisting>
  </para>
 </section>

 <section xml:id="mongo.installation.thirdparty">
  <title>Instrucciones de instalación de terceros</title>
  
  <para>
   Un gran número de personas han creado excelentes tutoriales de instalación de controlador
   de PHP.
  </para>

  <itemizedlist>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.video;">
      PHP 5.3.1 con Xdebug, MongoDB y Lithium en Ubuntu 9.10 / Apache 2.2
     </link>
    </para>
    <para>Un excelente video que te llevará paso a paso en la instalación de 
     Apache, PHP, Xdebug, MongoDB, y Lithium por Jon Adams.
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.ubuntu.9.04;">
      Instalando MongoDB y el controlador de PHP en Ubuntu 9.04
     </link>
    </para>
    <para>
     Artículo en castellano por Javier Aranda (<link xlink:href="&url.mongodb.ubuntu.9.04.en;">
      Traducción en inglés</link>).
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="&url.mongodb.osx;">
      OS X: Instalando MongoDB y el controlador de PHP
     </link>
    </para>
    <para>
     Por Matt Butcher.
    </para>
   </listitem>
  </itemizedlist>
 </section>

</section>


<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
