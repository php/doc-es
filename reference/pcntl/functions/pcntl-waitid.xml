<?xml version="1.0" encoding="utf-8"?>
<!-- EN-Revision: 4fbe0691312fbf85d67674f2e80c1abb5c36187f Maintainer: PhilDaiguille Status: ready -->
<!-- Reviewed: no Maintainer: Marqitos -->
<refentry xml:id="function.pcntl-waitid" xmlns="http://docbook.org/ns/docbook">
 <refnamediv>
  <refname>pcntl_waitid</refname>
  <refpurpose>Espera a que un proceso hijo cambie de estado</refpurpose>
 </refnamediv>

 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <type>bool</type><methodname>pcntl_waitid</methodname>
   <methodparam choice="opt"><type>int</type><parameter>idtype</parameter><initializer><constant>P_ALL</constant></initializer></methodparam>
   <methodparam choice="opt"><type class="union"><type>int</type><type>null</type></type><parameter>id</parameter><initializer>&null;</initializer></methodparam>
   <methodparam choice="opt"><type>array</type><parameter role="reference">info</parameter><initializer>[]</initializer></methodparam>
   <methodparam choice="opt"><type>int</type><parameter>flags</parameter><initializer><constant>WEXITED</constant></initializer></methodparam>
   <methodparam choice="opt"><type>array</type><parameter role="reference">resource_usage</parameter><initializer>[]</initializer></methodparam>
  </methodsynopsis>
  <para>
   Obtiene información de estado relacionada con eventos de terminación, parada
   y/o continuación en uno de los procesos hijos del llamador.
  </para>

  <para>
   A menos que se pase el flag <constant>WNOHANG</constant>, el proceso que llama
   quedará bloqueado hasta que ocurra un error, o hasta que la información de
   estado sea disponible y cumpla con todas las siguientes condiciones:
   <itemizedlist>
    <listitem>
     <simpara>
      La información de estado proviene de uno de los procesos hijos en el conjunto
      de procesos hijos especificado por los argumentos <parameter>idtype</parameter>
      y <parameter>id</parameter>.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      El cambio de estado en la información de estado coincide con uno de los
      flags de cambio de estado establecidos en el argumento <parameter>flags</parameter>.
     </simpara>
    </listitem>
   </itemizedlist>
  </para>

  <para>
   Si la información de estado coincidente está disponible antes de la llamada a
   <function>pcntl_waitid</function>, el retorno será inmediato. Si la información
   de estado coincidente está disponible para dos o más procesos hijos, el orden
   en que se informa su estado no está especificado.
  </para>

  <note>
   <para>
    Esta documentación cubre la especificación POSIX de la función
    <literal>waitid</literal>, junto con algunos parámetros adicionales
    específicos de las implementaciones en Linux, NetBSD y FreeBSD. Consulte la
    página del manual <literal>waitid(2)</literal> de su sistema para obtener
    detalles específicos sobre cómo funciona <literal>waitid</literal> en su sistema.
   </para>
  </note>
 </refsect1>

 <refsect1 role="parameters">
  &reftitle.parameters;
  <variablelist>
   <varlistentry>
    <term><parameter>idtype</parameter></term>
    <term><parameter>id</parameter></term>
    <listitem>
     <simpara>
      Los argumentos <parameter>idtype</parameter> y <parameter>id</parameter>
      se utilizan para especificar qué hijos esperar.
     </simpara>
     <table>
      <title>Argumentos estándar POSIX <parameter>idtype</parameter> y <parameter>id</parameter></title>
      <tgroup cols="2">
       <tbody>
        <row>
         <entry>Si <parameter>idtype</parameter> es <literal>P_ALL</literal></entry>
         <entry>
          esperar cualquier proceso hijo, <parameter>id</parameter> se ignora.
         </entry>
        </row>
        <row>
         <entry>Si <parameter>idtype</parameter> es <literal>P_PID</literal></entry>
         <entry>
          esperar al hijo con ID de proceso igual a <parameter>id</parameter>.
         </entry>
        </row>
        <row>
         <entry>Si <parameter>idtype</parameter> es <literal>P_PGID</literal></entry>
         <entry>
          esperar cualquier hijo con ID de grupo de procesos igual a <parameter>id</parameter>.
         </entry>
        </row>
       </tbody>
      </tgroup>
     </table>
     <table>
      <title>Argumentos específicos de Linux <parameter>idtype</parameter> y <parameter>id</parameter></title>
      <tgroup cols="2">
       <tbody>
        <row>
         <entry>Si <parameter>idtype</parameter> es <literal>P_PIDFD</literal> (desde Linux 5.4)</entry>
         <entry>
          esperar al hijo referenciado por el descriptor de archivo PID especificado en
          <parameter>id</parameter>.
          (Consulte la página del manual de Linux <literal>pidfd_open(2)</literal> para obtener
          más información sobre los descriptores de archivo PID.)
         </entry>
        </row>
       </tbody>
      </tgroup>
     </table>
     <table>
      <title>Argumentos específicos de NetBSD y FreeBSD <parameter>idtype</parameter> y <parameter>id</parameter></title>
      <tgroup cols="2">
       <tbody>
        <row>
         <entry>
          Si <parameter>idtype</parameter> es <literal>P_UID</literal>
         </entry>
         <entry>
          esperar procesos cuyo ID de usuario efectivo es igual a
          <parameter>id</parameter>.
         </entry>
        </row>
        <row>
         <entry>
          Si <parameter>idtype</parameter> es <literal>P_GID</literal>
         </entry>
         <entry>
          esperar procesos cuyo ID de grupo efectivo es igual a
          <parameter>id</parameter>.
         </entry>
        </row>
        <row>
         <entry>
          Si <parameter>idtype</parameter> es <literal>P_SID</literal>
         </entry>
         <entry>
          esperar procesos cuya ID de sesión es igual a
          <parameter>id</parameter>.
          Si el proceso hijo inició su propia sesión, su ID de sesión será
          igual a su ID de proceso. De lo contrario, la ID de sesión de un
          proceso hijo coincidirá con la ID de sesión del llamador.
         </entry>
        </row>
       </tbody>
      </tgroup>
     </table>
     <table>
      <title>Argumentos específicos de FreeBSD <parameter>idtype</parameter> y <parameter>id</parameter></title>
      <tgroup cols="2">
       <tbody>
        <row>
         <entry>
          Si <parameter>idtype</parameter> es <literal>P_JAILID</literal>
         </entry>
         <entry>
          esperar procesos dentro de una cárcel cuya identificador de cárcel es igual a
          <parameter>id</parameter>.
         </entry>
        </row>
       </tbody>
      </tgroup>
     </table>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><parameter>info</parameter></term>
    <listitem>
     <para>
      El parámetro <parameter>info</parameter> se establece en un array
      que contiene información sobre la señal.
     </para>
     <para>
      El array <parameter>info</parameter> puede contener las siguientes claves:
      <simplelist>
       <member><literal>signo</literal>: Número de señal</member>
       <member><literal>errno</literal>: Número de error del sistema</member>
       <member><literal>code</literal>: Código de señal</member>
       <member><literal>status</literal>: Valor de salida o señal</member>
       <member><literal>pid</literal>: ID del proceso emisor</member>
       <member><literal>uid</literal>: ID de usuario real del proceso emisor</member>
       <member><literal>utime</literal>: Tiempo de usuario consumido</member>
       <member><literal>stime</literal>: Tiempo de sistema consumido</member>
      </simplelist>
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><parameter>flags</parameter></term>
    <listitem>
     <para>
      El valor de <parameter>flags</parameter> es el valor de cero o más de
      las siguientes constantes combinadas con OR:
      <table>
       <title>Valores posibles para <parameter>flags</parameter></title>
       <tgroup cols="2">
        <tbody>
         <row>
          <entry><constant>WCONTINUED</constant></entry>
          <entry>
           Se devolverá el estado de cualquier proceso hijo continuado cuyo
           estado no ha sido reportado desde que continuó de una parada por
           control de trabajos o ha sido reportado solo por llamadas a
           <function>pcntl_waitid</function> con el flag
           <constant>WNOWAIT</constant> establecido.
          </entry>
         </row>
         <row>
          <entry><constant>WEXITED</constant></entry>
          <entry>
           Esperar procesos que han finalizado.
          </entry>
         </row>
         <row>
          <entry><constant>WNOHANG</constant></entry>
          <entry>
           No bloquear si no hay estado disponible; devolver inmediatamente.
          </entry>
         </row>
         <row>
          <entry><constant>WNOWAIT</constant></entry>
          <entry>
           Mantener el proceso cuyo estado se devuelve en
           <parameter>info</parameter> en un estado esperable. Esto no
           afectará el estado del proceso; el proceso puede ser esperado de nuevo
           después de que esta llamada se complete.
          </entry>
         </row>
         <row>
          <entry><constant>WSTOPPED</constant></entry>
          <entry>
           Se devolverá el estado de cualquier hijo que se haya detenido al
           recibir una señal, y cuyo estado no ha sido reportado desde que se
           detuvo o ha sido reportado solo por llamadas a
           <function>pcntl_waitid</function> con el flag
           <constant>WNOWAIT</constant> establecido.
          </entry>
         </row>
        </tbody>
       </tgroup>
      </table>
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><parameter>resource_usage</parameter></term>
    <listitem>
     <para>
      El parámetro <parameter>resource_usage</parameter> se establece en un array
      que contiene estadísticas de uso de recursos del proceso hijo.

      Esto se admite ya sea si la llamada al sistema wait6 está disponible
      (por ejemplo, en FreeBSD), o en Linux a través de la llamada al sistema
      waitid en bruto.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect1>

 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   <function>pcntl_waitid</function> devuelve &true; si
   <constant>WNOHANG</constant> fue especificado y no hay estado disponible para
   ningún proceso especificado por <parameter>idtype</parameter> y
   <parameter>id</parameter>.
  </para>

  <para>
   <function>pcntl_waitid</function> devuelve &true; debido al cambio de estado
   de uno de sus hijos.
  </para>

  <para>
   De lo contrario, se devuelve &false; y <function>pcntl_get_last_error</function>
   puede usarse para obtener el número de error <literal>errno</literal>.
  </para>

  <note>
   <para>
    Una vez obtenido un número de error <literal>errno</literal>,
    <function>pcntl_strerror</function> puede usarse para obtener el mensaje de
    texto asociado a él.
   </para>
  </note>
 </refsect1>

  <refsect1 role="errors">
  &reftitle.errors;
  <table>
   <title>Valores del número de error (<literal>errno</literal>)</title>
   <tgroup cols="2">
    <tbody>
     <row>
      <entry><constant>ECHILD</constant></entry>
      <entry>
       El proceso que llama no tiene procesos hijos no esperados existentes.
      </entry>
     </row>
     <row>
      <entry><constant>EINTR</constant></entry>
      <entry>
       <function>pcntl_waitid</function> fue interrumpido por una señal.
      </entry>
     </row>
     <row>
      <entry><constant>EINVAL</constant></entry>
      <entry>
       Se especificó un valor no válido para <parameter>flags</parameter>, o
       <parameter>idtype</parameter> y <parameter>id</parameter> especifican un
       conjunto no válido de procesos.
      </entry>
     </row>
    </tbody>
   </tgroup>
  </table>
 </refsect1>

 <refsect1 role="changelog">
  &reftitle.changelog;
  <informaltable>
   <tgroup cols="2">
    <thead>
     <row>
      <entry>&Version;</entry>
      <entry>&Description;</entry>
     </row>
    </thead>
    <tbody>
     <row>
      <entry>8.5.0</entry>
      <entry>
       Se ha añadido <parameter>resource_usage</parameter>.
      </entry>
     </row>
    </tbody>
   </tgroup>
  </informaltable>
 </refsect1>

 <refsect1 role="seealso">
  &reftitle.seealso;
  <para>
   <simplelist>
    <member><function>pcntl_waitpid</function></member>
    <member><function>pcntl_wait</function></member>
    <member><function>pcntl_fork</function></member>
    <member><function>pcntl_signal</function></member>
    <member><function>pcntl_wifexited</function></member>
    <member><function>pcntl_wifstopped</function></member>
    <member><function>pcntl_wifsignaled</function></member>
    <member><function>pcntl_wexitstatus</function></member>
    <member><function>pcntl_wtermsig</function></member>
    <member><function>pcntl_wstopsig</function></member>
   </simplelist>
  </para>
 </refsect1>

</refentry>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
